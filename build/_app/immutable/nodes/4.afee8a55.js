import{r as Mt,w as Bt,d as Rt}from"../chunks/index.69270f44.js";import{g as Tt,f as St}from"../chunks/helpers.de17de56.js";import{g as Ot,t as Me,d as Lt,A as Ut,b as Ft,e as jt,f as qt,c as Ht,M as zt,C as Qt}from"../chunks/contextMenu.a33a5d4a.js";import{S as Be,i as Re,s as Oe,w as Ke,T as We,k as u,a as S,y as Ee,l as d,m as f,h as l,c as N,z as Ie,n as c,b as q,A as we,g as G,v as He,d as ee,f as ze,U as Je,B as ke,D as ye,q as X,r as Y,E as s,F as re,u as Ne,K as Qe,G as Xe,p as je,I as qe,W as Xt,X as mt,C as pt,Y as Yt,e as _t,H as Gt,V as Kt,N as Wt}from"../chunks/index.05a8d8df.js";import{j as Jt}from"../chunks/singletons.b656a870.js";import{a as Zt,c as xt,p as ea}from"../chunks/store.49b29ba0.js";import{c as Nt,a as vt}from"../chunks/dialogs.850fb91d.js";import{C as Ct}from"../chunks/CategoryIcon.da2f02fa.js";function ta(t,e,a){return Mt(a==null?void 0:a.initialValue,_=>{let h=null;const o=b=>{h&&h.unsubscribe(),h=Tt(()=>t(b)).subscribe({next:p=>{_(p)},error:a==null?void 0:a.onError})};e&&e.subscribe(b=>{o(b)})})}let xe=null;function aa(t){xe=t}const Ze=Bt({date:St()}),sa=Tt(()=>Lt(xe)),Pt=ta(t=>Ot(xe,t.date),Ze,{initialValue:[]}),la=Rt(Pt,t=>Me.getTransactionsRecap(t));async function na({params:t}){aa(t.id)}const Ta=Object.freeze(Object.defineProperty({__proto__:null,load:na},Symbol.toStringTag,{value:"Module"})),oa=Jt("goto");function gt(t,e,a){const n=t.slice();return n[7]=e[a],n}function bt(t){let e,a,n=t[0].balance.toLocaleString(void 0,{currency:"EUR",style:"currency"})+"",_,h,o,b,m,p,r,g,i,$,v,A,E,y,I,w,T,O,H,L=t[0].name+"",V,C,K,j,Z,te,pe,x,ie=t[1].categoriesNegative,U=[];for(let k=0;k<ie.length;k+=1)U[k]=Et(gt(t,ie,k));return Z=new Ft({props:{transactionsTotals:t[1].totals}}),{c(){e=u("h2"),a=u("span"),_=X(n),h=S(),o=u("div"),b=u("div"),m=u("button"),p=u("span"),r=u("i"),g=S(),i=u("div"),$=u("div"),v=u("a"),A=u("i"),E=X(" Edit account"),y=S(),I=u("a"),w=u("i"),T=X(" Delete account"),O=S(),H=u("span"),V=X(L),C=S(),K=u("div");for(let k=0;k<U.length;k+=1)U[k].c();j=S(),Ee(Z.$$.fragment),this.h()},l(k){e=d(k,"H2",{class:!0});var M=f(e);a=d(M,"SPAN",{});var F=f(a);_=Y(F,n),F.forEach(l),h=N(M),o=d(M,"DIV",{class:!0});var P=f(o);b=d(P,"DIV",{class:!0});var ae=f(b);m=d(ae,"BUTTON",{class:!0,"aria-haspopup":!0});var he=f(m);p=d(he,"SPAN",{class:!0});var se=f(p);r=d(se,"I",{class:!0}),f(r).forEach(l),se.forEach(l),he.forEach(l),ae.forEach(l),g=N(P),i=d(P,"DIV",{class:!0,role:!0});var ue=f(i);$=d(ue,"DIV",{class:!0});var le=f($);v=d(le,"A",{class:!0});var ne=f(v);A=d(ne,"I",{class:!0}),f(A).forEach(l),E=Y(ne," Edit account"),ne.forEach(l),y=N(le),I=d(le,"A",{class:!0});var me=f(I);w=d(me,"I",{class:!0}),f(w).forEach(l),T=Y(me," Delete account"),me.forEach(l),le.forEach(l),ue.forEach(l),P.forEach(l),M.forEach(l),O=N(k),H=d(k,"SPAN",{class:!0});var z=f(H);V=Y(z,L),z.forEach(l),C=N(k),K=d(k,"DIV",{class:!0});var W=f(K);for(let J=0;J<U.length;J+=1)U[J].l(W);W.forEach(l),j=N(k),Ie(Z.$$.fragment,k),this.h()},h(){c(r,"class","fa-solid fa-ellipsis-vertical"),c(p,"class","icon is-small"),c(m,"class","button is-small is-light"),c(m,"aria-haspopup","true"),c(b,"class","dropdown-trigger"),c(A,"class","fa-solid fa-file-pen mr-1"),c(v,"class","dropdown-item"),c(w,"class","fa-solid fa-trash mr-1"),c(I,"class","dropdown-item has-text-danger"),c($,"class","dropdown-content"),c(i,"class","dropdown-menu"),c(i,"role","menu"),c(o,"class","dropdown is-right"),c(e,"class","title flex-container"),c(H,"class","has-text-grey"),c(K,"class","progress")},m(k,M){q(k,e,M),s(e,a),s(a,_),s(e,h),s(e,o),s(o,b),s(b,m),s(m,p),s(p,r),s(o,g),s(o,i),s(i,$),s($,v),s(v,A),s(v,E),s($,y),s($,I),s(I,w),s(I,T),q(k,O,M),q(k,H,M),s(H,V),q(k,C,M),q(k,K,M);for(let F=0;F<U.length;F+=1)U[F]&&U[F].m(K,null);q(k,j,M),we(Z,k,M),te=!0,pe||(x=[re(v,"click",t[5]),re(I,"click",t[4])],pe=!0)},p(k,M){if((!te||M&1)&&n!==(n=k[0].balance.toLocaleString(void 0,{currency:"EUR",style:"currency"})+"")&&Ne(_,n),(!te||M&1)&&L!==(L=k[0].name+"")&&Ne(V,L),M&10){ie=k[1].categoriesNegative;let P;for(P=0;P<ie.length;P+=1){const ae=gt(k,ie,P);U[P]?U[P].p(ae,M):(U[P]=Et(ae),U[P].c(),U[P].m(K,null))}for(;P<U.length;P+=1)U[P].d(1);U.length=ie.length}const F={};M&2&&(F.transactionsTotals=k[1].totals),Z.$set(F)},i(k){te||(G(Z.$$.fragment,k),te=!0)},o(k){ee(Z.$$.fragment,k),te=!1},d(k){k&&l(e),k&&l(O),k&&l(H),k&&l(C),k&&l(K),Qe(U,k),k&&l(j),ke(Z,k),pe=!1,Xe(x)}}}function Et(t){let e;return{c(){e=u("div"),this.h()},l(a){e=d(a,"DIV",{class:!0,style:!0}),f(e).forEach(l),this.h()},h(){var a;c(e,"class","progress-bar"),je(e,"background-color",(a=t[3].get(t[7].id))==null?void 0:a.color),je(e,"width",t[7].value*100/t[1].totals.negativeTotal+"%")},m(a,n){q(a,e,n)},p(a,n){var _;n&10&&je(e,"background-color",(_=a[3].get(a[7].id))==null?void 0:_.color),n&2&&je(e,"width",a[7].value*100/a[1].totals.negativeTotal+"%")},d(a){a&&l(e)}}}function ra(t){let e,a,n,_,h,o=t[0]&&t[1]&&bt(t);function b(p){t[6](p)}let m={};return t[2]!==void 0&&(m.modal=t[2]),n=new Ut({props:m}),Ke.push(()=>We(n,"modal",b)),{c(){e=u("div"),o&&o.c(),a=S(),Ee(n.$$.fragment),this.h()},l(p){e=d(p,"DIV",{class:!0});var r=f(e);o&&o.l(r),r.forEach(l),a=N(p),Ie(n.$$.fragment,p),this.h()},h(){c(e,"class","box mb-0")},m(p,r){q(p,e,r),o&&o.m(e,null),q(p,a,r),we(n,p,r),h=!0},p(p,[r]){p[0]&&p[1]?o?(o.p(p,r),r&3&&G(o,1)):(o=bt(p),o.c(),G(o,1),o.m(e,null)):o&&(He(),ee(o,1,1,()=>{o=null}),ze());const g={};!_&&r&4&&(_=!0,g.modal=p[2],Je(()=>_=!1)),n.$set(g)},i(p){h||(G(o),G(n.$$.fragment,p),h=!0)},o(p){ee(o),ee(n.$$.fragment,p),h=!1},d(p){p&&l(e),o&&o.d(),p&&l(a),ke(n,p)}}}function ca(t,e,a){let n;ye(t,Zt,r=>a(3,n=r));function _(){Nt.show(`Are you sure you want to delete the account '${o.name}' and all linked transactions ?`,"Delete account","is-danger").then(r=>{r&&(jt.remove(o.id),oa("/"))})}let h=null,{account:o=null}=e,{transactionsRecap:b=null}=e;const m=()=>h.show(o);function p(r){h=r,a(2,h)}return t.$$set=r=>{"account"in r&&a(0,o=r.account),"transactionsRecap"in r&&a(1,b=r.transactionsRecap)},[o,b,h,n,_,m,p]}class ia extends Be{constructor(e){super(),Re(this,e,ca,ra,Oe,{account:0,transactionsRecap:1})}}function It(t,e,a){const n=t.slice();return n[7]=e[a],n}function wt(t){let e,a,n,_,h=t[7].name+"",o,b,m,p,r;n=new Ct({props:{categoryId:t[7].id}});function g(){return t[4](t[7])}return{c(){e=u("a"),a=u("span"),Ee(n.$$.fragment),_=S(),o=X(h),b=S(),this.h()},l(i){e=d(i,"A",{class:!0});var $=f(e);a=d($,"SPAN",{class:!0});var v=f(a);Ie(n.$$.fragment,v),v.forEach(l),_=N($),o=Y($,h),b=N($),$.forEach(l),this.h()},h(){c(a,"class","panel-icon"),c(e,"class","panel-block")},m(i,$){q(i,e,$),s(e,a),we(n,a,null),s(e,_),s(e,o),s(e,b),m=!0,p||(r=re(e,"click",g),p=!0)},p(i,$){t=i;const v={};$&2&&(v.categoryId=t[7].id),n.$set(v),(!m||$&2)&&h!==(h=t[7].name+"")&&Ne(o,h)},i(i){m||(G(n.$$.fragment,i),m=!0)},o(i){ee(n.$$.fragment,i),m=!1},d(i){i&&l(e),ke(n),p=!1,r()}}}function ua(t){let e,a,n,_,h,o,b,m,p,r,g,i,$,v,A=t[1],E=[];for(let I=0;I<A.length;I+=1)E[I]=wt(It(t,A,I));const y=I=>ee(E[I],1,1,()=>{E[I]=null});return{c(){e=u("div"),a=u("div"),n=S(),_=u("div"),h=u("div"),o=u("div"),b=u("span"),m=X("Select a category"),p=S();for(let I=0;I<E.length;I+=1)E[I].c();r=S(),g=u("button"),this.h()},l(I){e=d(I,"DIV",{class:!0});var w=f(e);a=d(w,"DIV",{class:!0}),f(a).forEach(l),n=N(w),_=d(w,"DIV",{class:!0});var T=f(_);h=d(T,"DIV",{class:!0});var O=f(h);o=d(O,"DIV",{class:!0});var H=f(o);b=d(H,"SPAN",{class:!0});var L=f(b);m=Y(L,"Select a category"),L.forEach(l),H.forEach(l),p=N(O);for(let V=0;V<E.length;V+=1)E[V].l(O);O.forEach(l),T.forEach(l),r=N(w),g=d(w,"BUTTON",{class:!0,"aria-label":!0}),f(g).forEach(l),w.forEach(l),this.h()},h(){c(a,"class","modal-background"),c(b,"class","has-text-grey-lighter"),c(o,"class","panel-block"),c(h,"class","panel has-background-white"),c(_,"class","modal-content"),c(g,"class","modal-close is-large"),c(g,"aria-label","close"),c(e,"class","modal"),qe(e,"is-active",t[0])},m(I,w){q(I,e,w),s(e,a),s(e,n),s(e,_),s(_,h),s(h,o),s(o,b),s(b,m),s(h,p);for(let T=0;T<E.length;T+=1)E[T]&&E[T].m(h,null);s(e,r),s(e,g),i=!0,$||(v=re(e,"closing",t[5]),$=!0)},p(I,[w]){if(w&6){A=I[1];let T;for(T=0;T<A.length;T+=1){const O=It(I,A,T);E[T]?(E[T].p(O,w),G(E[T],1)):(E[T]=wt(O),E[T].c(),G(E[T],1),E[T].m(h,null))}for(He(),T=A.length;T<E.length;T+=1)y(T);ze()}(!i||w&1)&&qe(e,"is-active",I[0])},i(I){if(!i){for(let w=0;w<A.length;w+=1)G(E[w]);i=!0}},o(I){E=E.filter(Boolean);for(let w=0;w<E.length;w+=1)ee(E[w]);i=!1},d(I){I&&l(e),Qe(E,I),$=!1,v()}}}function da(t,e,a){let n;ye(t,xt,r=>a(1,n=r));function _(r){o(r),a(0,h=!1)}let h=!1,o=null;return[h,n,_,{show(){return a(0,h=!0),new Promise(function(r,g){o=r})}},r=>{_(r)},()=>{a(0,h=!1)}]}class fa extends Be{constructor(e){super(),Re(this,e,da,ua,Oe,{modal:3})}get modal(){return this.$$.ctx[3]}}function kt(t){let e=t[1][0].name+"",a;return{c(){a=X(e)},l(n){a=Y(n,e)},m(n,_){q(n,a,_)},p(n,_){_&2&&e!==(e=n[1][0].name+"")&&Ne(a,e)},d(n){n&&l(a)}}}function ha(t){let e,a,n,_,h,o,b,m,p,r,g,i,$,v,A,E,y,I,w,T,O,H,L,V,C,K,j,Z,te,pe,x,ie,U,k,M,F,P,ae,he,se,ue,le,ne,me,z=t[1]&&t[1][0]&&kt(t);return{c(){e=u("div"),a=u("div"),n=S(),_=u("div"),h=u("header"),o=u("p"),b=X("Import"),m=S(),p=u("button"),r=S(),g=u("section"),i=u("div"),$=u("label"),v=X(`Bank\r
                    `),A=u("div"),E=u("div"),y=u("select"),I=u("option"),w=X("La banque postal : CSV"),T=S(),O=u("div"),H=u("div"),L=u("div"),V=u("label"),C=u("input"),K=S(),j=u("span"),Z=u("span"),te=u("i"),pe=S(),x=u("span"),ie=X("Choose a fileâ€¦"),U=S(),k=u("span"),z&&z.c(),M=S(),F=u("footer"),P=u("button"),ae=X("Cancel"),he=S(),se=u("button"),ue=X("Import"),this.h()},l(W){e=d(W,"DIV",{class:!0});var J=f(e);a=d(J,"DIV",{class:!0}),f(a).forEach(l),n=N(J),_=d(J,"DIV",{class:!0});var oe=f(_);h=d(oe,"HEADER",{class:!0});var De=f(h);o=d(De,"P",{class:!0});var Ve=f(o);b=Y(Ve,"Import"),Ve.forEach(l),m=N(De),p=d(De,"BUTTON",{class:!0,"aria-label":!0}),f(p).forEach(l),De.forEach(l),r=N(oe),g=d(oe,"SECTION",{class:!0});var de=f(g);i=d(de,"DIV",{class:!0});var Te=f(i);$=d(Te,"LABEL",{class:!0});var fe=f($);v=Y(fe,`Bank\r
                    `),A=d(fe,"DIV",{class:!0});var Se=f(A);E=d(Se,"DIV",{class:!0});var Ce=f(E);y=d(Ce,"SELECT",{});var _e=f(y);I=d(_e,"OPTION",{});var R=f(I);w=Y(R,"La banque postal : CSV"),R.forEach(l),_e.forEach(l),Ce.forEach(l),Se.forEach(l),fe.forEach(l),Te.forEach(l),T=N(de),O=d(de,"DIV",{class:!0});var Le=f(O);H=d(Le,"DIV",{class:!0});var Ue=f(H);L=d(Ue,"DIV",{class:!0});var Pe=f(L);V=d(Pe,"LABEL",{class:!0});var $e=f(V);C=d($e,"INPUT",{class:!0,type:!0,name:!0}),K=N($e),j=d($e,"SPAN",{class:!0});var Ae=f(j);Z=d(Ae,"SPAN",{class:!0});var D=f(Z);te=d(D,"I",{class:!0}),f(te).forEach(l),D.forEach(l),pe=N(Ae),x=d(Ae,"SPAN",{class:!0});var B=f(x);ie=Y(B,"Choose a fileâ€¦"),B.forEach(l),Ae.forEach(l),U=N($e),k=d($e,"SPAN",{class:!0});var ce=f(k);z&&z.l(ce),ce.forEach(l),$e.forEach(l),Pe.forEach(l),Ue.forEach(l),Le.forEach(l),de.forEach(l),M=N(oe),F=d(oe,"FOOTER",{class:!0});var ve=f(F);P=d(ve,"BUTTON",{class:!0,"data-dismiss":!0});var Q=f(P);ae=Y(Q,"Cancel"),Q.forEach(l),he=N(ve),se=d(ve,"BUTTON",{class:!0});var ge=f(se);ue=Y(ge,"Import"),ge.forEach(l),ve.forEach(l),oe.forEach(l),J.forEach(l),this.h()},h(){c(a,"class","modal-background"),c(o,"class","modal-card-title"),c(p,"class","delete"),c(p,"aria-label","close"),c(h,"class","modal-card-head"),I.__value="labanquepostale",I.value=I.__value,t[2]===void 0&&Xt(()=>t[6].call(y)),c(E,"class","select is-fullwidth"),c(A,"class","control"),c($,"class","label"),c(i,"class","field"),c(C,"class","file-input"),c(C,"type","file"),c(C,"name","resume"),c(te,"class","gg-software-upload"),c(Z,"class","file-icon"),c(x,"class","file-label"),c(j,"class","file-cta"),c(k,"class","file-name"),c(V,"class","file-label"),c(L,"class","file has-name is-boxed is-justify-content-center"),c(H,"class","control"),c(O,"class","field"),c(g,"class","modal-card-body"),c(P,"class","button"),c(P,"data-dismiss","modal"),c(se,"class","button is-success"),se.disabled=le=!Dt(t[1]),c(F,"class","modal-card-foot is-justify-content-flex-end"),c(_,"class","modal-card"),c(e,"class","modal"),qe(e,"is-active",!!t[0])},m(W,J){q(W,e,J),s(e,a),s(e,n),s(e,_),s(_,h),s(h,o),s(o,b),s(h,m),s(h,p),s(_,r),s(_,g),s(g,i),s(i,$),s($,v),s($,A),s(A,E),s(E,y),s(y,I),s(I,w),mt(y,t[2],!0),s(g,T),s(g,O),s(O,H),s(H,L),s(L,V),s(V,C),s(V,K),s(V,j),s(j,Z),s(Z,te),s(j,pe),s(j,x),s(x,ie),s(V,U),s(V,k),z&&z.m(k,null),s(_,M),s(_,F),s(F,P),s(P,ae),s(F,he),s(F,se),s(se,ue),ne||(me=[re(y,"change",t[6]),re(C,"change",t[7]),re(se,"click",t[3]),re(e,"closing",t[4])],ne=!0)},p(W,[J]){J&4&&mt(y,W[2]),W[1]&&W[1][0]?z?z.p(W,J):(z=kt(W),z.c(),z.m(k,null)):z&&(z.d(1),z=null),J&2&&le!==(le=!Dt(W[1]))&&(se.disabled=le),J&1&&qe(e,"is-active",!!W[0])},i:pt,o:pt,d(W){W&&l(e),z&&z.d(),ne=!1,Xe(me)}}}function Dt(t){return t&&t.length===1}function ma(t,e,a){let n;ye(t,ea,i=>a(8,n=i));async function _(){qt.saveImportedFile(o[0]);let i=await Me.imports(o[0],{accountId:m,bank:b,saveImportedFiles:n.saveImportedFiles});i.count?vt.success(`${i.count} new transactions imported.`):vt.info("No new transaction imported."),h()}function h(){a(0,m=null)}let o,b="labanquepostale",{accountId:m=null}=e;const p={show(i=null){a(0,m=i)}};function r(){b=Yt(this),a(2,b)}function g(){o=this.files,a(1,o)}return t.$$set=i=>{"accountId"in i&&a(0,m=i.accountId)},[m,o,b,_,h,p,r,g]}class pa extends Be{constructor(e){super(),Re(this,e,ma,ha,Oe,{accountId:0,modal:5})}get modal(){return this.$$.ctx[5]}}function $t(t,e,a){const n=t.slice();return n[21]=e[a],n}function Vt(t,e,a){const n=t.slice();return n[24]=e[a],n[25]=e,n[26]=a,n}function At(t){let e,a,n,_,h,o=t[24].description+"",b,m,p,r,g,i,$;n=new Ct({props:{categoryId:t[24].categoryId,selected:t[24].selected}}),p=new zt({props:{value:t[24].value}});function v(){return t[14](t[24],t[25],t[26])}function A(...E){return t[15](t[24],t[25],t[26],...E)}return{c(){e=u("a"),a=u("span"),Ee(n.$$.fragment),_=S(),h=u("div"),b=X(o),m=S(),Ee(p.$$.fragment),r=S(),this.h()},l(E){e=d(E,"A",{class:!0});var y=f(e);a=d(y,"SPAN",{class:!0});var I=f(a);Ie(n.$$.fragment,I),I.forEach(l),_=N(y),h=d(y,"DIV",{class:!0});var w=f(h);b=Y(w,o),m=N(w),Ie(p.$$.fragment,w),w.forEach(l),r=N(y),y.forEach(l),this.h()},h(){c(a,"class","panel-icon"),c(h,"class","flex-container"),c(e,"class","panel-block")},m(E,y){q(E,e,y),s(e,a),we(n,a,null),s(e,_),s(e,h),s(h,b),s(h,m),we(p,h,null),s(e,r),g=!0,i||($=[re(e,"click",v),re(e,"contextmenu",Kt(A))],i=!0)},p(E,y){t=E;const I={};y&1&&(I.categoryId=t[24].categoryId),y&1&&(I.selected=t[24].selected),n.$set(I),(!g||y&1)&&o!==(o=t[24].description+"")&&Ne(b,o);const w={};y&1&&(w.value=t[24].value),p.$set(w)},i(E){g||(G(n.$$.fragment,E),G(p.$$.fragment,E),g=!0)},o(E){ee(n.$$.fragment,E),ee(p.$$.fragment,E),g=!1},d(E){E&&l(e),ke(n),ke(p),i=!1,Xe($)}}}function yt(t){let e,a=t[21].date.toLocaleDateString()+"",n,_,h,o,b=t[21].transactions,m=[];for(let r=0;r<b.length;r+=1)m[r]=At(Vt(t,b,r));const p=r=>ee(m[r],1,1,()=>{m[r]=null});return{c(){e=u("div"),n=X(a),_=S();for(let r=0;r<m.length;r+=1)m[r].c();h=_t(),this.h()},l(r){e=d(r,"DIV",{class:!0});var g=f(e);n=Y(g,a),g.forEach(l),_=N(r);for(let i=0;i<m.length;i+=1)m[i].l(r);h=_t(),this.h()},h(){c(e,"class","panel-block has-text-grey-light has-background-light")},m(r,g){q(r,e,g),s(e,n),q(r,_,g);for(let i=0;i<m.length;i+=1)m[i]&&m[i].m(r,g);q(r,h,g),o=!0},p(r,g){if((!o||g&1)&&a!==(a=r[21].date.toLocaleDateString()+"")&&Ne(n,a),g&17){b=r[21].transactions;let i;for(i=0;i<b.length;i+=1){const $=Vt(r,b,i);m[i]?(m[i].p($,g),G(m[i],1)):(m[i]=At($),m[i].c(),G(m[i],1),m[i].m(h.parentNode,h))}for(He(),i=b.length;i<m.length;i+=1)p(i);ze()}},i(r){if(!o){for(let g=0;g<b.length;g+=1)G(m[g]);o=!0}},o(r){m=m.filter(Boolean);for(let g=0;g<m.length;g+=1)ee(m[g]);o=!1},d(r){r&&l(e),r&&l(_),Qe(m,r),r&&l(h)}}}function _a(t){let e,a,n,_,h,o,b,m,p,r,g,i,$,v,A,E,y,I,w,T,O,H,L,V,C,K,j,Z,te,pe,x,ie,U,k,M,F,P,ae,he,se,ue,le,ne,me,z,W,J,oe,De,Ve,de,Te,fe,Se,Ce,_e=t[0],R=[];for(let D=0;D<_e.length;D+=1)R[D]=yt($t(t,_e,D));const Le=D=>ee(R[D],1,1,()=>{R[D]=null});function Ue(D){t[16](D)}let Pe={};t[1]!==void 0&&(Pe.modal=t[1]),oe=new fa({props:Pe}),Ke.push(()=>We(oe,"modal",Ue));function $e(D){t[17](D)}let Ae={};return t[2]!==void 0&&(Ae.modal=t[2]),de=new pa({props:Ae}),Ke.push(()=>We(de,"modal",$e)),{c(){e=u("nav"),a=u("div"),n=u("span"),_=X("Transactions"),h=S(),o=u("div"),b=u("div"),m=u("div"),p=u("button"),r=u("span"),g=u("i"),i=S(),$=u("div"),v=u("div"),A=u("a"),E=X("Current month"),I=S(),w=u("a"),T=X("1 month"),H=S(),L=u("a"),V=X("6 month"),K=S(),j=u("a"),Z=X("1 year"),pe=S(),x=u("a"),ie=X("All"),k=S(),M=u("div"),F=u("div"),P=u("button"),ae=u("span"),he=u("i"),se=S(),ue=u("div"),le=u("div"),ne=u("a"),me=u("i"),z=X(" Import transactions"),W=S();for(let D=0;D<R.length;D+=1)R[D].c();J=S(),Ee(oe.$$.fragment),Ve=S(),Ee(de.$$.fragment),this.h()},l(D){e=d(D,"NAV",{class:!0});var B=f(e);a=d(B,"DIV",{class:!0});var ce=f(a);n=d(ce,"SPAN",{class:!0});var ve=f(n);_=Y(ve,"Transactions"),ve.forEach(l),h=N(ce),o=d(ce,"DIV",{});var Q=f(o);b=d(Q,"DIV",{class:!0});var ge=f(b);m=d(ge,"DIV",{class:!0});var et=f(m);p=d(et,"BUTTON",{class:!0,"aria-haspopup":!0});var tt=f(p);r=d(tt,"SPAN",{class:!0});var at=f(r);g=d(at,"I",{class:!0}),f(g).forEach(l),at.forEach(l),tt.forEach(l),et.forEach(l),i=N(ge),$=d(ge,"DIV",{class:!0,role:!0});var st=f($);v=d(st,"DIV",{class:!0});var be=f(v);A=d(be,"A",{class:!0});var lt=f(A);E=Y(lt,"Current month"),lt.forEach(l),I=N(be),w=d(be,"A",{class:!0});var nt=f(w);T=Y(nt,"1 month"),nt.forEach(l),H=N(be),L=d(be,"A",{class:!0});var ot=f(L);V=Y(ot,"6 month"),ot.forEach(l),K=N(be),j=d(be,"A",{class:!0});var rt=f(j);Z=Y(rt,"1 year"),rt.forEach(l),pe=N(be),x=d(be,"A",{class:!0});var ct=f(x);ie=Y(ct,"All"),ct.forEach(l),be.forEach(l),st.forEach(l),ge.forEach(l),k=N(Q),M=d(Q,"DIV",{class:!0});var Fe=f(M);F=d(Fe,"DIV",{class:!0});var it=f(F);P=d(it,"BUTTON",{class:!0,"aria-haspopup":!0});var ut=f(P);ae=d(ut,"SPAN",{class:!0});var dt=f(ae);he=d(dt,"I",{class:!0}),f(he).forEach(l),dt.forEach(l),ut.forEach(l),it.forEach(l),se=N(Fe),ue=d(Fe,"DIV",{class:!0,role:!0});var ft=f(ue);le=d(ft,"DIV",{class:!0});var ht=f(le);ne=d(ht,"A",{class:!0});var Ye=f(ne);me=d(Ye,"I",{class:!0}),f(me).forEach(l),z=Y(Ye," Import transactions"),Ye.forEach(l),ht.forEach(l),ft.forEach(l),Fe.forEach(l),Q.forEach(l),ce.forEach(l),W=N(B);for(let Ge=0;Ge<R.length;Ge+=1)R[Ge].l(B);B.forEach(l),J=N(D),Ie(oe.$$.fragment,D),Ve=N(D),Ie(de.$$.fragment,D),this.h()},h(){c(n,"class","has-text-grey-lighter"),c(g,"class","fa-solid fa-filter"),c(r,"class","icon is-small"),c(p,"class","button is-small is-light"),c(p,"aria-haspopup","true"),c(m,"class","dropdown-trigger"),c(A,"class",y="dropdown-item "+(t[3]==0?"is-active":"")),c(w,"class",O="dropdown-item "+(t[3]==1?"is-active":"")),c(L,"class",C="dropdown-item "+(t[3]==6?"is-active":"")),c(j,"class",te="dropdown-item "+(t[3]==12?"is-active":"")),c(x,"class",U="dropdown-item "+(t[3]==-1?"is-active":"")),c(v,"class","dropdown-content"),c($,"class","dropdown-menu"),c($,"role","menu"),c(b,"class","dropdown is-right"),c(he,"class","fa-solid fa-ellipsis-vertical"),c(ae,"class","icon is-small"),c(P,"class","button is-small is-light"),c(P,"aria-haspopup","true"),c(F,"class","dropdown-trigger"),c(me,"class","fa-solid fa-file-import"),c(ne,"class","dropdown-item"),c(le,"class","dropdown-content"),c(ue,"class","dropdown-menu"),c(ue,"role","menu"),c(M,"class","dropdown is-right"),c(a,"class","panel-block flex-container"),c(e,"class","panel")},m(D,B){q(D,e,B),s(e,a),s(a,n),s(n,_),s(a,h),s(a,o),s(o,b),s(b,m),s(m,p),s(p,r),s(r,g),s(b,i),s(b,$),s($,v),s(v,A),s(A,E),s(v,I),s(v,w),s(w,T),s(v,H),s(v,L),s(L,V),s(v,K),s(v,j),s(j,Z),s(v,pe),s(v,x),s(x,ie),s(o,k),s(o,M),s(M,F),s(F,P),s(P,ae),s(ae,he),s(M,se),s(M,ue),s(ue,le),s(le,ne),s(ne,me),s(ne,z),s(e,W);for(let ce=0;ce<R.length;ce+=1)R[ce]&&R[ce].m(e,null);q(D,J,B),we(oe,D,B),q(D,Ve,B),we(de,D,B),fe=!0,Se||(Ce=[re(A,"click",t[9]),re(w,"click",t[10]),re(L,"click",t[11]),re(j,"click",t[12]),re(x,"click",t[13]),re(ne,"click",t[5])],Se=!0)},p(D,[B]){if((!fe||B&8&&y!==(y="dropdown-item "+(D[3]==0?"is-active":"")))&&c(A,"class",y),(!fe||B&8&&O!==(O="dropdown-item "+(D[3]==1?"is-active":"")))&&c(w,"class",O),(!fe||B&8&&C!==(C="dropdown-item "+(D[3]==6?"is-active":"")))&&c(L,"class",C),(!fe||B&8&&te!==(te="dropdown-item "+(D[3]==12?"is-active":"")))&&c(j,"class",te),(!fe||B&8&&U!==(U="dropdown-item "+(D[3]==-1?"is-active":"")))&&c(x,"class",U),B&17){_e=D[0];let Q;for(Q=0;Q<_e.length;Q+=1){const ge=$t(D,_e,Q);R[Q]?(R[Q].p(ge,B),G(R[Q],1)):(R[Q]=yt(ge),R[Q].c(),G(R[Q],1),R[Q].m(e,null))}for(He(),Q=_e.length;Q<R.length;Q+=1)Le(Q);ze()}const ce={};!De&&B&2&&(De=!0,ce.modal=D[1],Je(()=>De=!1)),oe.$set(ce);const ve={};!Te&&B&4&&(Te=!0,ve.modal=D[2],Je(()=>Te=!1)),de.$set(ve)},i(D){if(!fe){for(let B=0;B<_e.length;B+=1)G(R[B]);G(oe.$$.fragment,D),G(de.$$.fragment,D),fe=!0}},o(D){R=R.filter(Boolean);for(let B=0;B<R.length;B+=1)ee(R[B]);ee(oe.$$.fragment,D),ee(de.$$.fragment,D),fe=!1},d(D){D&&l(e),Qe(R,D),D&&l(J),ke(oe,D),D&&l(Ve),ke(de,D),Se=!1,Xe(Ce)}}}function va(t,e,a){let n;ye(t,Ze,V=>a(18,n=V));let _=[],h=null,o=null,b=0;function m(V,C){Ht.show({x:V.pageX,y:V.pageY},[{title:"Set category",icon:"fa-solid fa-tag",action:r},{title:"Remove",icon:"fa-solid fa-trash",style:"has-text-danger",action:g}])}function p(){o.show($)}function r(){h.show().then(V=>{Me.updateCategory(v.filter(C=>C.selected),V)})}function g(){const V=v.filter(C=>C.selected);Nt.show(`Are you sure you want to delete these transactions (${V.length}) ?`,"Delete transactions","is-danger").then(C=>{C&&Me.remove(V)})}function i(V){a(3,b=V);let C=null;switch(V){case 0:C=St();break;case 1:C=new Date(new Date().setMonth(new Date().getMonth()-1));break;case 6:C=new Date(new Date().setMonth(new Date().getMonth()-6));break;case 12:C=new Date(new Date().setMonth(new Date().getMonth()-12));break;default:C=null}Gt(Ze,n.date=C,n)}let{accountId:$=null}=e,{transactions:v=null}=e;const A=()=>i(0),E=()=>i(1),y=()=>i(6),I=()=>i(12),w=()=>i(-1),T=(V,C,K)=>{a(0,C[K].selected=!V.selected,_)},O=(V,C,K,j)=>{a(0,C[K].selected=!0,_),m(j)};function H(V){h=V,a(1,h)}function L(V){o=V,a(2,o)}return t.$$set=V=>{"accountId"in V&&a(7,$=V.accountId),"transactions"in V&&a(8,v=V.transactions)},t.$$.update=()=>{t.$$.dirty&256&&a(0,_=Me.groupTransactionsByDate(v))},[_,h,o,b,m,p,i,$,v,A,E,y,I,w,T,O,H,L]}class ga extends Be{constructor(e){super(),Re(this,e,va,_a,Oe,{accountId:7,transactions:8})}}function ba(t){var $;let e,a,n,_,h,o,b,m,p,r,g,i;return _=new ia({props:{account:t[0],transactionsRecap:t[1]}}),m=new Qt({props:{transactionsRecap:t[1]}}),g=new ga({props:{transactions:t[2],accountId:($=t[0])==null?void 0:$.id}}),{c(){e=S(),a=u("div"),n=u("div"),Ee(_.$$.fragment),h=S(),o=u("div"),b=u("div"),Ee(m.$$.fragment),p=S(),r=u("div"),Ee(g.$$.fragment),this.h()},l(v){Wt("svelte-1832t0f",document.head).forEach(l),e=N(v),a=d(v,"DIV",{class:!0});var E=f(a);n=d(E,"DIV",{class:!0});var y=f(n);Ie(_.$$.fragment,y),y.forEach(l),h=N(E),o=d(E,"DIV",{class:!0});var I=f(o);b=d(I,"DIV",{class:!0});var w=f(b);Ie(m.$$.fragment,w),w.forEach(l),I.forEach(l),E.forEach(l),p=N(v),r=d(v,"DIV",{});var T=f(r);Ie(g.$$.fragment,T),T.forEach(l),this.h()},h(){document.title="MePloutos - Account",c(n,"class","column pb-2"),c(b,"class","flex-list"),c(o,"class","column pb-2"),c(a,"class","columns is-variable is-1 mb-0")},m(v,A){q(v,e,A),q(v,a,A),s(a,n),we(_,n,null),s(a,h),s(a,o),s(o,b),we(m,b,null),q(v,p,A),q(v,r,A),we(g,r,null),i=!0},p(v,[A]){var w;const E={};A&1&&(E.account=v[0]),A&2&&(E.transactionsRecap=v[1]),_.$set(E);const y={};A&2&&(y.transactionsRecap=v[1]),m.$set(y);const I={};A&4&&(I.transactions=v[2]),A&1&&(I.accountId=(w=v[0])==null?void 0:w.id),g.$set(I)},i(v){i||(G(_.$$.fragment,v),G(m.$$.fragment,v),G(g.$$.fragment,v),i=!0)},o(v){ee(_.$$.fragment,v),ee(m.$$.fragment,v),ee(g.$$.fragment,v),i=!1},d(v){v&&l(e),v&&l(a),ke(_),ke(m),v&&l(p),v&&l(r),ke(g)}}}function Ea(t,e,a){let n,_,h;return ye(t,sa,o=>a(0,n=o)),ye(t,la,o=>a(1,_=o)),ye(t,Pt,o=>a(2,h=o)),[n,_,h]}class Sa extends Be{constructor(e){super(),Re(this,e,Ea,ba,Oe,{})}}export{Sa as component,Ta as universal};
