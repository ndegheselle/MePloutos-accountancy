import{S as te,i as se,s as ae,k as d,q as L,a as T,l as h,m as _,r as M,h as o,c as U,n as f,b as B,E as l,u as Q,C as X,K as ve,D as Z,p as W,w as Ie,T as Se,y as Y,z as x,A as G,F as _e,g as q,v as me,f as ge,U as ke,d as O,B as J,V as we,H as De}from"../chunks/index.05a8d8df.js";import{g as Ve,t as Ne,a as Pe,A as Re,M as Te,C as Ue,b as ze}from"../chunks/AccountCreateUpdateModal.94992009.js";import{d as be,w as $e}from"../chunks/index.69270f44.js";import{g as Ce,i as Le}from"../chunks/investments.cc9c4ab9.js";import{g as Me,s as Be}from"../chunks/subscriptions.67db3f66.js";import{p as ce}from"../chunks/store.49b29ba0.js";import{g as je,f as He}from"../chunks/helpers.de17de56.js";import{a as qe}from"../chunks/ContextMenu.060070ae.js";const Ee=be(je(Pe),a=>a||[]),Oe=be(ce,(a,e)=>{if(!(a!=null&&a.favoriteAccountId))return null;(async()=>{let t=await Ve(a.favoriteAccountId,He()),s=Ne.getTransactionsRecap(t);e(s)})()}),Ae=$e([]),ye=$e([]);(async()=>(Ae.set(await Ce()),ye.set(await Me())))();function fe(a,e,t){const s=a.slice();return s[2]=e[t],s}function pe(a){let e;return{c(){e=d("div"),this.h()},l(t){e=h(t,"DIV",{class:!0,style:!0}),_(e).forEach(o),this.h()},h(){f(e,"class","progress-bar svelte-194ehsc"),W(e,"background-color",a[2].color),W(e,"width",a[2].balance*100/a[1]+"%")},m(t,s){B(t,e,s)},p(t,s){s&1&&W(e,"background-color",t[2].color),s&3&&W(e,"width",t[2].balance*100/t[1]+"%")},d(t){t&&o(e)}}}function Fe(a){let e,t,s,n,r,v=a[1].toLocaleString(void 0,{currency:"EUR",style:"currency"})+"",V,m,w,A=a[0],c=[];for(let p=0;p<A.length;p+=1)c[p]=pe(fe(a,A,p));return{c(){e=d("div"),t=d("span"),s=L("Total"),n=T(),r=d("h1"),V=L(v),m=T(),w=d("div");for(let p=0;p<c.length;p+=1)c[p].c();this.h()},l(p){e=h(p,"DIV",{class:!0});var y=_(e);t=h(y,"SPAN",{class:!0});var g=_(t);s=M(g,"Total"),g.forEach(o),n=U(y),r=h(y,"H1",{class:!0});var S=_(r);V=M(S,v),S.forEach(o),m=U(y),w=h(y,"DIV",{class:!0});var b=_(w);for(let u=0;u<c.length;u+=1)c[u].l(b);b.forEach(o),y.forEach(o),this.h()},h(){f(t,"class","has-text-grey-lighter box-title"),f(r,"class","title"),f(w,"class","progress"),f(e,"class","box mb-2")},m(p,y){B(p,e,y),l(e,t),l(t,s),l(e,n),l(e,r),l(r,V),l(e,m),l(e,w);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(w,null)},p(p,[y]){if(y&2&&v!==(v=p[1].toLocaleString(void 0,{currency:"EUR",style:"currency"})+"")&&Q(V,v),y&3){A=p[0];let g;for(g=0;g<A.length;g+=1){const S=fe(p,A,g);c[g]?c[g].p(S,y):(c[g]=pe(S),c[g].c(),c[g].m(w,null))}for(;g<c.length;g+=1)c[g].d(1);c.length=A.length}},i:X,o:X,d(p){p&&o(e),ve(c,p)}}}function Ke(a,e,t){let s,n;return Z(a,Ee,r=>t(0,n=r)),a.$$.update=()=>{a.$$.dirty&1&&t(1,s=n.reduce((r,v)=>r+v.balance,0))},[n,s]}class Xe extends te{constructor(e){super(),se(this,e,Ke,Fe,ae,{})}}function de(a,e,t){const s=a.slice();return s[7]=e[t],s}function Ye(a){let e,t=a[7].name+"",s;return{c(){e=d("span"),s=L(t)},l(n){e=h(n,"SPAN",{});var r=_(e);s=M(r,t),r.forEach(o)},m(n,r){B(n,e,r),l(e,s)},p(n,r){r&4&&t!==(t=n[7].name+"")&&Q(s,t)},d(n){n&&o(e)}}}function xe(a){let e,t=a[7].name+"",s;return{c(){e=d("b"),s=L(t)},l(n){e=h(n,"B",{});var r=_(e);s=M(r,t),r.forEach(o)},m(n,r){B(n,e,r),l(e,s)},p(n,r){r&4&&t!==(t=n[7].name+"")&&Q(s,t)},d(n){n&&o(e)}}}function he(a){let e,t,s,n,r,v,V,m,w,A,c,p,y;function g(D,k){return D[1].favoriteAccountId==D[7].id?xe:Ye}let S=g(a),b=S(a);m=new Te({props:{value:a[7].balance}});function u(...D){return a[5](a[7],...D)}return{c(){e=d("a"),t=d("span"),s=d("i"),r=T(),v=d("div"),b.c(),V=T(),Y(m.$$.fragment),w=T(),this.h()},l(D){e=h(D,"A",{class:!0,href:!0});var k=_(e);t=h(k,"SPAN",{class:!0});var N=_(t);s=h(N,"I",{class:!0,style:!0}),_(s).forEach(o),N.forEach(o),r=U(k),v=h(k,"DIV",{class:!0});var i=_(v);b.l(i),V=U(i),x(m.$$.fragment,i),i.forEach(o),w=U(k),k.forEach(o),this.h()},h(){f(s,"class",n="fa-"+(a[1].favoriteAccountId==a[7].id?"solid":"regular")+" fa-folder"),W(s,"color",a[7].color),f(t,"class","panel-icon"),f(v,"class","flex-container"),f(e,"class","panel-block"),f(e,"href",A="/accounts/"+a[7].id)},m(D,k){B(D,e,k),l(e,t),l(t,s),l(e,r),l(e,v),b.m(v,null),l(v,V),G(m,v,null),l(e,w),c=!0,p||(y=_e(e,"contextmenu",we(u)),p=!0)},p(D,k){a=D,(!c||k&6&&n!==(n="fa-"+(a[1].favoriteAccountId==a[7].id?"solid":"regular")+" fa-folder"))&&f(s,"class",n),(!c||k&4)&&W(s,"color",a[7].color),S===(S=g(a))&&b?b.p(a,k):(b.d(1),b=S(a),b&&(b.c(),b.m(v,V)));const N={};k&4&&(N.value=a[7].balance),m.$set(N),(!c||k&4&&A!==(A="/accounts/"+a[7].id))&&f(e,"href",A)},i(D){c||(q(m.$$.fragment,D),c=!0)},o(D){O(m.$$.fragment,D),c=!1},d(D){D&&o(e),b.d(),J(m),p=!1,y()}}}function Ge(a){let e,t,s,n,r,v,V,m,w,A,c,p,y,g,S,b=a[2],u=[];for(let i=0;i<b.length;i+=1)u[i]=he(de(a,b,i));const D=i=>O(u[i],1,1,()=>{u[i]=null});function k(i){a[6](i)}let N={};return a[0]!==void 0&&(N.modal=a[0]),c=new Re({props:N}),Ie.push(()=>Se(c,"modal",k)),{c(){e=d("div"),t=d("div"),s=d("span"),n=L("Accounts"),r=T(),v=d("button"),V=d("span"),m=d("i"),w=T();for(let i=0;i<u.length;i+=1)u[i].c();A=T(),Y(c.$$.fragment),this.h()},l(i){e=h(i,"DIV",{class:!0});var I=_(e);t=h(I,"DIV",{class:!0});var R=_(t);s=h(R,"SPAN",{class:!0});var $=_(s);n=M($,"Accounts"),$.forEach(o),r=U(R),v=h(R,"BUTTON",{class:!0});var P=_(v);V=h(P,"SPAN",{class:!0});var C=_(V);m=h(C,"I",{class:!0}),_(m).forEach(o),C.forEach(o),P.forEach(o),R.forEach(o),w=U(I);for(let j=0;j<u.length;j+=1)u[j].l(I);I.forEach(o),A=U(i),x(c.$$.fragment,i),this.h()},h(){f(s,"class","has-text-grey-lighter"),f(m,"class","fa-solid fa-plus"),f(V,"class","icon is-small"),f(v,"class","button is-small is-light"),f(t,"class","panel-block flex-container p-0"),f(e,"class","panel p-4 mb-0 accounts-container svelte-ija8ie")},m(i,I){B(i,e,I),l(e,t),l(t,s),l(s,n),l(t,r),l(t,v),l(v,V),l(V,m),l(e,w);for(let R=0;R<u.length;R+=1)u[R]&&u[R].m(e,null);B(i,A,I),G(c,i,I),y=!0,g||(S=_e(v,"click",a[4]),g=!0)},p(i,[I]){if(I&14){b=i[2];let $;for($=0;$<b.length;$+=1){const P=de(i,b,$);u[$]?(u[$].p(P,I),q(u[$],1)):(u[$]=he(P),u[$].c(),q(u[$],1),u[$].m(e,null))}for(me(),$=b.length;$<u.length;$+=1)D($);ge()}const R={};!p&&I&1&&(p=!0,R.modal=i[0],ke(()=>p=!1)),c.$set(R)},i(i){if(!y){for(let I=0;I<b.length;I+=1)q(u[I]);q(c.$$.fragment,i),y=!0}},o(i){u=u.filter(Boolean);for(let I=0;I<u.length;I+=1)O(u[I]);O(c.$$.fragment,i),y=!1},d(i){i&&o(e),ve(u,i),i&&o(A),J(c,i),g=!1,S()}}}function Je(a,e,t){let s,n;Z(a,ce,A=>t(1,s=A)),Z(a,Ee,A=>t(2,n=A));function r(A,c){qe.show({x:A.pageX,y:A.pageY},[{title:"Set as favorite",icon:"fa-regular fa-star",action:()=>{De(ce,s.favoriteAccountId=c.id,s)}}])}let v=null;const V=()=>v.show(),m=(A,c)=>{r(c,A)};function w(A){v=A,t(0,v)}return[v,s,n,r,V,m,w]}class Qe extends te{constructor(e){super(),se(this,e,Je,Ge,ae,{})}}function We(a){let e,t,s,n,r=a[0].number+"",v,V,m,w,A,c,p,y,g=a[0].total.toLocaleString(void 0,{currency:"EUR",style:"currency"})+"",S,b,u,D=a[0].percentage+"",k,N,i,I,R;return{c(){e=d("a"),t=d("div"),s=d("div"),n=d("span"),v=L(r),V=T(),m=d("span"),w=L("Investments"),A=T(),c=d("div"),p=d("span"),y=d("span"),S=L(g),b=T(),u=d("span"),k=L(D),N=L(" %"),i=d("i"),this.h()},l($){e=h($,"A",{class:!0,href:!0});var P=_(e);t=h(P,"DIV",{class:!0});var C=_(t);s=h(C,"DIV",{class:!0});var j=_(s);n=h(j,"SPAN",{class:!0});var H=_(n);v=M(H,r),H.forEach(o),V=U(j),m=h(j,"SPAN",{class:!0});var ee=_(m);w=M(ee,"Investments"),ee.forEach(o),j.forEach(o),A=U(C),c=h(C,"DIV",{class:!0});var E=_(c);p=h(E,"SPAN",{});var z=_(p);y=h(z,"SPAN",{class:!0});var K=_(y);S=M(K,g),K.forEach(o),b=U(z),u=h(z,"SPAN",{class:!0});var F=_(u);k=M(F,D),N=M(F," %"),i=h(F,"I",{class:!0}),_(i).forEach(o),F.forEach(o),z.forEach(o),E.forEach(o),C.forEach(o),P.forEach(o),this.h()},h(){f(n,"class","is-size-1 number-of-investments title mb-0 svelte-14en6wt"),f(m,"class","is-size-6 has-text-grey-lighter number-of-investments svelte-14en6wt"),f(s,"class","column"),f(y,"class","title is-spaced"),f(i,"class",I="fa-solid fa-arrow-trend-"+(a[0].percentage<0?"down":"up")),f(u,"class",R="percent subtitle is-4 "+(a[0].percentage<0?"has-text-danger":"has-text-success")+" svelte-14en6wt"),f(c,"class","column flex-container"),f(t,"class","columns is-mobile"),f(e,"class","box"),f(e,"href","/investments")},m($,P){B($,e,P),l(e,t),l(t,s),l(s,n),l(n,v),l(s,V),l(s,m),l(m,w),l(t,A),l(t,c),l(c,p),l(p,y),l(y,S),l(p,b),l(p,u),l(u,k),l(u,N),l(u,i)},p($,[P]){P&1&&r!==(r=$[0].number+"")&&Q(v,r),P&1&&g!==(g=$[0].total.toLocaleString(void 0,{currency:"EUR",style:"currency"})+"")&&Q(S,g),P&1&&D!==(D=$[0].percentage+"")&&Q(k,D),P&1&&I!==(I="fa-solid fa-arrow-trend-"+($[0].percentage<0?"down":"up"))&&f(i,"class",I),P&1&&R!==(R="percent subtitle is-4 "+($[0].percentage<0?"has-text-danger":"has-text-success")+" svelte-14en6wt")&&f(u,"class",R)},i:X,o:X,d($){$&&o(e)}}}function Ze(a,e,t){let s,n;return Z(a,Ae,r=>t(1,n=r)),a.$$.update=()=>{a.$$.dirty&2&&t(0,s=Le.getInvestmentsRecap(n))},[s,n]}class et extends te{constructor(e){super(),se(this,e,Ze,We,ae,{})}}function tt(a){let e,t,s,n,r=a[0].number+"",v,V,m,w,A,c,p,y,g=a[0].perMonth.toLocaleString(void 0,{currency:"EUR",style:"currency"})+"",S,b,u,D;return{c(){e=d("a"),t=d("div"),s=d("div"),n=d("span"),v=L(r),V=T(),m=d("span"),w=L("Subscriptions"),A=T(),c=d("div"),p=d("span"),y=d("span"),S=L(g),b=T(),u=d("span"),D=L("per month"),this.h()},l(k){e=h(k,"A",{class:!0,href:!0});var N=_(e);t=h(N,"DIV",{class:!0});var i=_(t);s=h(i,"DIV",{class:!0});var I=_(s);n=h(I,"SPAN",{class:!0});var R=_(n);v=M(R,r),R.forEach(o),V=U(I),m=h(I,"SPAN",{class:!0});var $=_(m);w=M($,"Subscriptions"),$.forEach(o),I.forEach(o),A=U(i),c=h(i,"DIV",{class:!0});var P=_(c);p=h(P,"SPAN",{});var C=_(p);y=h(C,"SPAN",{class:!0});var j=_(y);S=M(j,g),j.forEach(o),b=U(C),u=h(C,"SPAN",{class:!0});var H=_(u);D=M(H,"per month"),H.forEach(o),C.forEach(o),P.forEach(o),i.forEach(o),N.forEach(o),this.h()},h(){f(n,"class","is-size-1 title-placement title mb-0 svelte-klj0o"),f(m,"class","is-size-6 has-text-grey-lighter title-placement svelte-klj0o"),f(s,"class","column has-text-right"),f(y,"class","title mb-0 has-text-danger"),f(u,"class","title-placement is-size-6 has-text-grey-lighter svelte-klj0o"),f(c,"class","column flex-container"),f(t,"class","columns is-mobile"),f(e,"class","box"),f(e,"href","/subscriptions")},m(k,N){B(k,e,N),l(e,t),l(t,s),l(s,n),l(n,v),l(s,V),l(s,m),l(m,w),l(t,A),l(t,c),l(c,p),l(p,y),l(y,S),l(p,b),l(p,u),l(u,D)},p(k,[N]){N&1&&r!==(r=k[0].number+"")&&Q(v,r),N&1&&g!==(g=k[0].perMonth.toLocaleString(void 0,{currency:"EUR",style:"currency"})+"")&&Q(S,g)},i:X,o:X,d(k){k&&o(e)}}}function st(a,e,t){let s,n;return Z(a,ye,r=>t(1,n=r)),a.$$.update=()=>{a.$$.dirty&2&&t(0,s=Be.getSubscriptionsRecap(n))},[s,n]}class at extends te{constructor(e){super(),se(this,e,st,tt,ae,{})}}function nt(a){let e,t,s;return{c(){e=d("div"),t=d("span"),s=L("No favorite account"),this.h()},l(n){e=h(n,"DIV",{class:!0});var r=_(e);t=h(r,"SPAN",{class:!0});var v=_(t);s=M(v,"No favorite account"),v.forEach(o),r.forEach(o),this.h()},h(){f(t,"class","has-text-grey"),f(e,"class","flex-centered p-5")},m(n,r){B(n,e,r),l(e,t),l(t,s)},p:X,i:X,o:X,d(n){n&&o(e)}}}function lt(a){let e,t;return e=new ze({props:{transactionsTotals:a[0].totals}}),{c(){Y(e.$$.fragment)},l(s){x(e.$$.fragment,s)},m(s,n){G(e,s,n),t=!0},p(s,n){const r={};n&1&&(r.transactionsTotals=s[0].totals),e.$set(r)},i(s){t||(q(e.$$.fragment,s),t=!0)},o(s){O(e.$$.fragment,s),t=!1},d(s){J(e,s)}}}function rt(a){let e,t,s,n,r,v,V,m,w,A,c,p,y,g,S,b,u,D,k,N,i,I,R,$,P,C;s=new Xe({}),r=new Qe({}),w=new Ue({props:{transactionsRecap:a[0],class:"mb-2"}});const j=[lt,nt],H=[];function ee(E,z){return E[0]?0:1}return S=ee(a),b=H[S]=j[S](a),I=new et({}),P=new at({}),{c(){e=d("div"),t=d("div"),Y(s.$$.fragment),n=T(),Y(r.$$.fragment),v=T(),V=d("div"),m=d("div"),Y(w.$$.fragment),A=T(),c=d("div"),p=d("span"),y=L("Account recap"),g=T(),b.c(),u=T(),D=d("hr"),k=T(),N=d("div"),i=d("div"),Y(I.$$.fragment),R=T(),$=d("div"),Y(P.$$.fragment),this.h()},l(E){e=h(E,"DIV",{class:!0});var z=_(e);t=h(z,"DIV",{class:!0});var K=_(t);x(s.$$.fragment,K),n=U(K),x(r.$$.fragment,K),K.forEach(o),v=U(z),V=h(z,"DIV",{class:!0});var F=_(V);m=h(F,"DIV",{class:!0});var ne=_(m);x(w.$$.fragment,ne),A=U(ne),c=h(ne,"DIV",{class:!0});var le=_(c);p=h(le,"SPAN",{class:!0});var oe=_(p);y=M(oe,"Account recap"),oe.forEach(o),g=U(le),b.l(le),le.forEach(o),ne.forEach(o),F.forEach(o),z.forEach(o),u=U(E),D=h(E,"HR",{class:!0}),k=U(E),N=h(E,"DIV",{class:!0});var re=_(N);i=h(re,"DIV",{class:!0});var ie=_(i);x(I.$$.fragment,ie),ie.forEach(o),R=U(re),$=h(re,"DIV",{class:!0});var ue=_($);x(P.$$.fragment,ue),ue.forEach(o),re.forEach(o),this.h()},h(){f(t,"class","column pb-0"),f(p,"class","has-text-grey-lighter box-title"),f(c,"class","box"),f(m,"class","flex-list"),f(V,"class","column pb-0"),f(e,"class","columns is-variable is-1"),f(D,"class","mx-5 my-4"),f(i,"class","column pb-0"),f($,"class","column"),f(N,"class","columns is-variable is-1")},m(E,z){B(E,e,z),l(e,t),G(s,t,null),l(t,n),G(r,t,null),l(e,v),l(e,V),l(V,m),G(w,m,null),l(m,A),l(m,c),l(c,p),l(p,y),l(c,g),H[S].m(c,null),B(E,u,z),B(E,D,z),B(E,k,z),B(E,N,z),l(N,i),G(I,i,null),l(N,R),l(N,$),G(P,$,null),C=!0},p(E,[z]){const K={};z&1&&(K.transactionsRecap=E[0]),w.$set(K);let F=S;S=ee(E),S===F?H[S].p(E,z):(me(),O(H[F],1,1,()=>{H[F]=null}),ge(),b=H[S],b?b.p(E,z):(b=H[S]=j[S](E),b.c()),q(b,1),b.m(c,null))},i(E){C||(q(s.$$.fragment,E),q(r.$$.fragment,E),q(w.$$.fragment,E),q(b),q(I.$$.fragment,E),q(P.$$.fragment,E),C=!0)},o(E){O(s.$$.fragment,E),O(r.$$.fragment,E),O(w.$$.fragment,E),O(b),O(I.$$.fragment,E),O(P.$$.fragment,E),C=!1},d(E){E&&o(e),J(s),J(r),J(w),H[S].d(),E&&o(u),E&&o(D),E&&o(k),E&&o(N),J(I),J(P)}}}function ct(a,e,t){let s;return Z(a,Oe,n=>t(0,s=n)),[s]}class _t extends te{constructor(e){super(),se(this,e,ct,rt,ae,{})}}export{_t as component};
