import{r as Bt,w as Mt,d as Rt}from"../chunks/index.9e8dd097.js";import{g as Tt,f as St}from"../chunks/helpers.de17de56.js";import{g as Ot,t as Be,d as Lt,A as Ut,b as Ft,e as jt,f as qt,c as Ht,M as Qt,C as zt}from"../chunks/contextMenu.48a8a67d.js";import{S as Me,i as Re,s as Oe,w as Xe,Q as Ye,k as i,a as T,y as Ee,l as u,m as h,h as l,c as S,z as Ie,n as c,b as z,A as we,g as W,v as He,d as ee,f as Qe,R as Je,B as ke,D as ye,q as G,r as K,E as s,F as re,u as Ne,K as ze,G as Ge,p as je,I as qe,U as Gt,V as mt,C as pt,W as Kt,e as vt,H as Wt,T as Xt}from"../chunks/index.14546b91.js";import{j as Yt}from"../chunks/singletons.92adc078.js";import{a as Jt,c as Zt,p as xt}from"../chunks/store.eb676330.js";import{c as Nt,a as _t}from"../chunks/dialogs.1c3bad3e.js";import{C as Ct}from"../chunks/CategoryIcon.35fadce2.js";function ea(t,e,a){return Bt(a==null?void 0:a.initialValue,_=>{let d=null;const o=g=>{d&&d.unsubscribe(),d=Tt(()=>t(g)).subscribe({next:m=>{_(m)},error:a==null?void 0:a.onError})};e&&e.subscribe(g=>{o(g)})})}let xe=null;function ta(t){xe=t}const Ze=Mt({date:St()}),aa=Tt(()=>Lt(xe)),Pt=ea(t=>Ot(xe,t.date),Ze,{initialValue:[]}),sa=Rt(Pt,t=>Be.getTransactionsRecap(t));async function la({params:t}){ta(t.id)}const ya=Object.freeze(Object.defineProperty({__proto__:null,load:la},Symbol.toStringTag,{value:"Module"})),na=Yt("goto");function gt(t,e,a){const n=t.slice();return n[7]=e[a],n}function bt(t){let e,a,n=t[0].balance.toLocaleString(void 0,{currency:"EUR",style:"currency"})+"",_,d,o,g,p,m,r,b,f,v,w,y,E,A,I,$,N,O,q,L=t[0].name+"",V,C,X,j,Z,te,pe,x,ie=t[1].categoriesNegative,U=[];for(let k=0;k<ie.length;k+=1)U[k]=Et(gt(t,ie,k));return Z=new Ft({props:{transactionsTotals:t[1].totals}}),{c(){e=i("h2"),a=i("span"),_=G(n),d=T(),o=i("div"),g=i("div"),p=i("button"),m=i("span"),r=i("i"),b=T(),f=i("div"),v=i("div"),w=i("a"),y=i("i"),E=G(" Edit account"),A=T(),I=i("a"),$=i("i"),N=G(" Delete account"),O=T(),q=i("span"),V=G(L),C=T(),X=i("div");for(let k=0;k<U.length;k+=1)U[k].c();j=T(),Ee(Z.$$.fragment),this.h()},l(k){e=u(k,"H2",{class:!0});var B=h(e);a=u(B,"SPAN",{});var F=h(a);_=K(F,n),F.forEach(l),d=S(B),o=u(B,"DIV",{class:!0});var P=h(o);g=u(P,"DIV",{class:!0});var ae=h(g);p=u(ae,"BUTTON",{class:!0,"aria-haspopup":!0});var he=h(p);m=u(he,"SPAN",{class:!0});var se=h(m);r=u(se,"I",{class:!0}),h(r).forEach(l),se.forEach(l),he.forEach(l),ae.forEach(l),b=S(P),f=u(P,"DIV",{class:!0,role:!0});var ue=h(f);v=u(ue,"DIV",{class:!0});var le=h(v);w=u(le,"A",{class:!0});var ne=h(w);y=u(ne,"I",{class:!0}),h(y).forEach(l),E=K(ne," Edit account"),ne.forEach(l),A=S(le),I=u(le,"A",{class:!0});var me=h(I);$=u(me,"I",{class:!0}),h($).forEach(l),N=K(me," Delete account"),me.forEach(l),le.forEach(l),ue.forEach(l),P.forEach(l),B.forEach(l),O=S(k),q=u(k,"SPAN",{class:!0});var H=h(q);V=K(H,L),H.forEach(l),C=S(k),X=u(k,"DIV",{class:!0});var Y=h(X);for(let J=0;J<U.length;J+=1)U[J].l(Y);Y.forEach(l),j=S(k),Ie(Z.$$.fragment,k),this.h()},h(){c(r,"class","fa-solid fa-ellipsis-vertical"),c(m,"class","icon is-small"),c(p,"class","button is-small is-light"),c(p,"aria-haspopup","true"),c(g,"class","dropdown-trigger"),c(y,"class","fa-solid fa-file-pen mr-1"),c(w,"class","dropdown-item"),c($,"class","fa-solid fa-trash mr-1"),c(I,"class","dropdown-item has-text-danger"),c(v,"class","dropdown-content"),c(f,"class","dropdown-menu"),c(f,"role","menu"),c(o,"class","dropdown is-right"),c(e,"class","title flex-container"),c(q,"class","has-text-grey"),c(X,"class","progress")},m(k,B){z(k,e,B),s(e,a),s(a,_),s(e,d),s(e,o),s(o,g),s(g,p),s(p,m),s(m,r),s(o,b),s(o,f),s(f,v),s(v,w),s(w,y),s(w,E),s(v,A),s(v,I),s(I,$),s(I,N),z(k,O,B),z(k,q,B),s(q,V),z(k,C,B),z(k,X,B);for(let F=0;F<U.length;F+=1)U[F]&&U[F].m(X,null);z(k,j,B),we(Z,k,B),te=!0,pe||(x=[re(w,"click",t[5]),re(I,"click",t[4])],pe=!0)},p(k,B){if((!te||B&1)&&n!==(n=k[0].balance.toLocaleString(void 0,{currency:"EUR",style:"currency"})+"")&&Ne(_,n),(!te||B&1)&&L!==(L=k[0].name+"")&&Ne(V,L),B&10){ie=k[1].categoriesNegative;let P;for(P=0;P<ie.length;P+=1){const ae=gt(k,ie,P);U[P]?U[P].p(ae,B):(U[P]=Et(ae),U[P].c(),U[P].m(X,null))}for(;P<U.length;P+=1)U[P].d(1);U.length=ie.length}const F={};B&2&&(F.transactionsTotals=k[1].totals),Z.$set(F)},i(k){te||(W(Z.$$.fragment,k),te=!0)},o(k){ee(Z.$$.fragment,k),te=!1},d(k){k&&l(e),k&&l(O),k&&l(q),k&&l(C),k&&l(X),ze(U,k),k&&l(j),ke(Z,k),pe=!1,Ge(x)}}}function Et(t){let e;return{c(){e=i("div"),this.h()},l(a){e=u(a,"DIV",{class:!0,style:!0}),h(e).forEach(l),this.h()},h(){var a;c(e,"class","progress-bar"),je(e,"background-color",(a=t[3].get(t[7].id))==null?void 0:a.color),je(e,"width",t[7].value*100/t[1].totals.negativeTotal+"%")},m(a,n){z(a,e,n)},p(a,n){var _;n&10&&je(e,"background-color",(_=a[3].get(a[7].id))==null?void 0:_.color),n&2&&je(e,"width",a[7].value*100/a[1].totals.negativeTotal+"%")},d(a){a&&l(e)}}}function oa(t){let e,a,n,_,d,o=t[0]&&t[1]&&bt(t);function g(m){t[6](m)}let p={};return t[2]!==void 0&&(p.modal=t[2]),n=new Ut({props:p}),Xe.push(()=>Ye(n,"modal",g)),{c(){e=i("div"),o&&o.c(),a=T(),Ee(n.$$.fragment),this.h()},l(m){e=u(m,"DIV",{class:!0});var r=h(e);o&&o.l(r),r.forEach(l),a=S(m),Ie(n.$$.fragment,m),this.h()},h(){c(e,"class","box mb-0")},m(m,r){z(m,e,r),o&&o.m(e,null),z(m,a,r),we(n,m,r),d=!0},p(m,[r]){m[0]&&m[1]?o?(o.p(m,r),r&3&&W(o,1)):(o=bt(m),o.c(),W(o,1),o.m(e,null)):o&&(He(),ee(o,1,1,()=>{o=null}),Qe());const b={};!_&&r&4&&(_=!0,b.modal=m[2],Je(()=>_=!1)),n.$set(b)},i(m){d||(W(o),W(n.$$.fragment,m),d=!0)},o(m){ee(o),ee(n.$$.fragment,m),d=!1},d(m){m&&l(e),o&&o.d(),m&&l(a),ke(n,m)}}}function ra(t,e,a){let n;ye(t,Jt,r=>a(3,n=r));function _(){Nt.show(`Are you sure you want to delete the account '${o.name}' and all linked transactions ?`,"Delete account","is-danger").then(r=>{r&&(jt.remove(o.id),na("/"))})}let d=null,{account:o=null}=e,{transactionsRecap:g=null}=e;const p=()=>d.show(o);function m(r){d=r,a(2,d)}return t.$$set=r=>{"account"in r&&a(0,o=r.account),"transactionsRecap"in r&&a(1,g=r.transactionsRecap)},[o,g,d,n,_,p,m]}class ca extends Me{constructor(e){super(),Re(this,e,ra,oa,Oe,{account:0,transactionsRecap:1})}}function It(t,e,a){const n=t.slice();return n[7]=e[a],n}function wt(t){let e,a,n,_,d=t[7].name+"",o,g,p,m,r;n=new Ct({props:{categoryId:t[7].id}});function b(){return t[4](t[7])}return{c(){e=i("a"),a=i("span"),Ee(n.$$.fragment),_=T(),o=G(d),g=T(),this.h()},l(f){e=u(f,"A",{class:!0});var v=h(e);a=u(v,"SPAN",{class:!0});var w=h(a);Ie(n.$$.fragment,w),w.forEach(l),_=S(v),o=K(v,d),g=S(v),v.forEach(l),this.h()},h(){c(a,"class","panel-icon"),c(e,"class","panel-block")},m(f,v){z(f,e,v),s(e,a),we(n,a,null),s(e,_),s(e,o),s(e,g),p=!0,m||(r=re(e,"click",b),m=!0)},p(f,v){t=f;const w={};v&2&&(w.categoryId=t[7].id),n.$set(w),(!p||v&2)&&d!==(d=t[7].name+"")&&Ne(o,d)},i(f){p||(W(n.$$.fragment,f),p=!0)},o(f){ee(n.$$.fragment,f),p=!1},d(f){f&&l(e),ke(n),m=!1,r()}}}function ia(t){let e,a,n,_,d,o,g,p,m,r,b,f,v,w,y=t[1],E=[];for(let I=0;I<y.length;I+=1)E[I]=wt(It(t,y,I));const A=I=>ee(E[I],1,1,()=>{E[I]=null});return{c(){e=i("div"),a=i("div"),n=T(),_=i("div"),d=i("div"),o=i("div"),g=i("span"),p=G("Select a category"),m=T();for(let I=0;I<E.length;I+=1)E[I].c();r=T(),b=i("button"),this.h()},l(I){e=u(I,"DIV",{class:!0});var $=h(e);a=u($,"DIV",{class:!0}),h(a).forEach(l),n=S($),_=u($,"DIV",{class:!0});var N=h(_);d=u(N,"DIV",{class:!0});var O=h(d);o=u(O,"DIV",{class:!0});var q=h(o);g=u(q,"SPAN",{class:!0});var L=h(g);p=K(L,"Select a category"),L.forEach(l),q.forEach(l),m=S(O);for(let V=0;V<E.length;V+=1)E[V].l(O);O.forEach(l),N.forEach(l),r=S($),b=u($,"BUTTON",{class:!0,"aria-label":!0}),h(b).forEach(l),$.forEach(l),this.h()},h(){c(a,"class","modal-background"),c(g,"class","has-text-grey-lighter"),c(o,"class","panel-block"),c(d,"class","panel has-background-white"),c(_,"class","modal-content"),c(b,"class","modal-close is-large"),c(b,"aria-label","close"),c(e,"class","modal"),qe(e,"is-active",t[0])},m(I,$){z(I,e,$),s(e,a),s(e,n),s(e,_),s(_,d),s(d,o),s(o,g),s(g,p),s(d,m);for(let N=0;N<E.length;N+=1)E[N]&&E[N].m(d,null);s(e,r),s(e,b),f=!0,v||(w=re(e,"closing",t[5]),v=!0)},p(I,[$]){if($&6){y=I[1];let N;for(N=0;N<y.length;N+=1){const O=It(I,y,N);E[N]?(E[N].p(O,$),W(E[N],1)):(E[N]=wt(O),E[N].c(),W(E[N],1),E[N].m(d,null))}for(He(),N=y.length;N<E.length;N+=1)A(N);Qe()}(!f||$&1)&&qe(e,"is-active",I[0])},i(I){if(!f){for(let $=0;$<y.length;$+=1)W(E[$]);f=!0}},o(I){E=E.filter(Boolean);for(let $=0;$<E.length;$+=1)ee(E[$]);f=!1},d(I){I&&l(e),ze(E,I),v=!1,w()}}}function ua(t,e,a){let n;ye(t,Zt,r=>a(1,n=r));function _(r){o(r),a(0,d=!1)}let d=!1,o=null;return[d,n,_,{show(){return a(0,d=!0),new Promise(function(r,b){o=r})}},r=>{_(r)},()=>{a(0,d=!1)}]}class da extends Me{constructor(e){super(),Re(this,e,ua,ia,Oe,{modal:3})}get modal(){return this.$$.ctx[3]}}function kt(t){let e=t[1][0].name+"",a;return{c(){a=G(e)},l(n){a=K(n,e)},m(n,_){z(n,a,_)},p(n,_){_&2&&e!==(e=n[1][0].name+"")&&Ne(a,e)},d(n){n&&l(a)}}}function fa(t){let e,a,n,_,d,o,g,p,m,r,b,f,v,w,y,E,A,I,$,N,O,q,L,V,C,X,j,Z,te,pe,x,ie,U,k,B,F,P,ae,he,se,ue,le,ne,me,H=t[1]&&t[1][0]&&kt(t);return{c(){e=i("div"),a=i("div"),n=T(),_=i("div"),d=i("header"),o=i("p"),g=G("Import"),p=T(),m=i("button"),r=T(),b=i("section"),f=i("div"),v=i("label"),w=G(`Bank\r
                    `),y=i("div"),E=i("div"),A=i("select"),I=i("option"),$=G("La banque postal : CSV"),N=T(),O=i("div"),q=i("div"),L=i("div"),V=i("label"),C=i("input"),X=T(),j=i("span"),Z=i("span"),te=i("i"),pe=T(),x=i("span"),ie=G("Choose a fileâ€¦"),U=T(),k=i("span"),H&&H.c(),B=T(),F=i("footer"),P=i("button"),ae=G("Cancel"),he=T(),se=i("button"),ue=G("Import"),this.h()},l(Y){e=u(Y,"DIV",{class:!0});var J=h(e);a=u(J,"DIV",{class:!0}),h(a).forEach(l),n=S(J),_=u(J,"DIV",{class:!0});var oe=h(_);d=u(oe,"HEADER",{class:!0});var De=h(d);o=u(De,"P",{class:!0});var Ve=h(o);g=K(Ve,"Import"),Ve.forEach(l),p=S(De),m=u(De,"BUTTON",{class:!0,"aria-label":!0}),h(m).forEach(l),De.forEach(l),r=S(oe),b=u(oe,"SECTION",{class:!0});var de=h(b);f=u(de,"DIV",{class:!0});var Te=h(f);v=u(Te,"LABEL",{class:!0});var fe=h(v);w=K(fe,`Bank\r
                    `),y=u(fe,"DIV",{class:!0});var Se=h(y);E=u(Se,"DIV",{class:!0});var Ce=h(E);A=u(Ce,"SELECT",{});var ve=h(A);I=u(ve,"OPTION",{});var R=h(I);$=K(R,"La banque postal : CSV"),R.forEach(l),ve.forEach(l),Ce.forEach(l),Se.forEach(l),fe.forEach(l),Te.forEach(l),N=S(de),O=u(de,"DIV",{class:!0});var Le=h(O);q=u(Le,"DIV",{class:!0});var Ue=h(q);L=u(Ue,"DIV",{class:!0});var Pe=h(L);V=u(Pe,"LABEL",{class:!0});var $e=h(V);C=u($e,"INPUT",{class:!0,type:!0,name:!0}),X=S($e),j=u($e,"SPAN",{class:!0});var Ae=h(j);Z=u(Ae,"SPAN",{class:!0});var D=h(Z);te=u(D,"I",{class:!0}),h(te).forEach(l),D.forEach(l),pe=S(Ae),x=u(Ae,"SPAN",{class:!0});var M=h(x);ie=K(M,"Choose a fileâ€¦"),M.forEach(l),Ae.forEach(l),U=S($e),k=u($e,"SPAN",{class:!0});var ce=h(k);H&&H.l(ce),ce.forEach(l),$e.forEach(l),Pe.forEach(l),Ue.forEach(l),Le.forEach(l),de.forEach(l),B=S(oe),F=u(oe,"FOOTER",{class:!0});var _e=h(F);P=u(_e,"BUTTON",{class:!0,"data-dismiss":!0});var Q=h(P);ae=K(Q,"Cancel"),Q.forEach(l),he=S(_e),se=u(_e,"BUTTON",{class:!0});var ge=h(se);ue=K(ge,"Import"),ge.forEach(l),_e.forEach(l),oe.forEach(l),J.forEach(l),this.h()},h(){c(a,"class","modal-background"),c(o,"class","modal-card-title"),c(m,"class","delete"),c(m,"aria-label","close"),c(d,"class","modal-card-head"),I.__value="labanquepostale",I.value=I.__value,t[2]===void 0&&Gt(()=>t[6].call(A)),c(E,"class","select is-fullwidth"),c(y,"class","control"),c(v,"class","label"),c(f,"class","field"),c(C,"class","file-input"),c(C,"type","file"),c(C,"name","resume"),c(te,"class","gg-software-upload"),c(Z,"class","file-icon"),c(x,"class","file-label"),c(j,"class","file-cta"),c(k,"class","file-name"),c(V,"class","file-label"),c(L,"class","file has-name is-boxed is-justify-content-center"),c(q,"class","control"),c(O,"class","field"),c(b,"class","modal-card-body"),c(P,"class","button"),c(P,"data-dismiss","modal"),c(se,"class","button is-success"),se.disabled=le=!Dt(t[1]),c(F,"class","modal-card-foot is-justify-content-flex-end"),c(_,"class","modal-card"),c(e,"class","modal"),qe(e,"is-active",!!t[0])},m(Y,J){z(Y,e,J),s(e,a),s(e,n),s(e,_),s(_,d),s(d,o),s(o,g),s(d,p),s(d,m),s(_,r),s(_,b),s(b,f),s(f,v),s(v,w),s(v,y),s(y,E),s(E,A),s(A,I),s(I,$),mt(A,t[2],!0),s(b,N),s(b,O),s(O,q),s(q,L),s(L,V),s(V,C),s(V,X),s(V,j),s(j,Z),s(Z,te),s(j,pe),s(j,x),s(x,ie),s(V,U),s(V,k),H&&H.m(k,null),s(_,B),s(_,F),s(F,P),s(P,ae),s(F,he),s(F,se),s(se,ue),ne||(me=[re(A,"change",t[6]),re(C,"change",t[7]),re(se,"click",t[3]),re(e,"closing",t[4])],ne=!0)},p(Y,[J]){J&4&&mt(A,Y[2]),Y[1]&&Y[1][0]?H?H.p(Y,J):(H=kt(Y),H.c(),H.m(k,null)):H&&(H.d(1),H=null),J&2&&le!==(le=!Dt(Y[1]))&&(se.disabled=le),J&1&&qe(e,"is-active",!!Y[0])},i:pt,o:pt,d(Y){Y&&l(e),H&&H.d(),ne=!1,Ge(me)}}}function Dt(t){return t&&t.length===1}function ha(t,e,a){let n;ye(t,xt,f=>a(8,n=f));async function _(){qt.saveImportedFile(o[0]);let f=await Be.imports(o[0],{accountId:p,bank:g,saveImportedFiles:n.saveImportedFiles});f.count?_t.success(`${f.count} new transactions imported.`):_t.info("No new transaction imported."),d()}function d(){a(0,p=null)}let o,g="labanquepostale",{accountId:p=null}=e;const m={show(f=null){a(0,p=f)}};function r(){g=Kt(this),a(2,g)}function b(){o=this.files,a(1,o)}return t.$$set=f=>{"accountId"in f&&a(0,p=f.accountId)},[p,o,g,_,d,m,r,b]}class ma extends Me{constructor(e){super(),Re(this,e,ha,fa,Oe,{accountId:0,modal:5})}get modal(){return this.$$.ctx[5]}}function $t(t,e,a){const n=t.slice();return n[21]=e[a],n}function Vt(t,e,a){const n=t.slice();return n[24]=e[a],n[25]=e,n[26]=a,n}function At(t){let e,a,n,_,d,o=t[24].description+"",g,p,m,r,b,f,v;n=new Ct({props:{categoryId:t[24].categoryId,selected:t[24].selected}}),m=new Qt({props:{value:t[24].value}});function w(){return t[14](t[24],t[25],t[26])}function y(...E){return t[15](t[24],t[25],t[26],...E)}return{c(){e=i("a"),a=i("span"),Ee(n.$$.fragment),_=T(),d=i("div"),g=G(o),p=T(),Ee(m.$$.fragment),r=T(),this.h()},l(E){e=u(E,"A",{class:!0});var A=h(e);a=u(A,"SPAN",{class:!0});var I=h(a);Ie(n.$$.fragment,I),I.forEach(l),_=S(A),d=u(A,"DIV",{class:!0});var $=h(d);g=K($,o),p=S($),Ie(m.$$.fragment,$),$.forEach(l),r=S(A),A.forEach(l),this.h()},h(){c(a,"class","panel-icon"),c(d,"class","flex-container"),c(e,"class","panel-block")},m(E,A){z(E,e,A),s(e,a),we(n,a,null),s(e,_),s(e,d),s(d,g),s(d,p),we(m,d,null),s(e,r),b=!0,f||(v=[re(e,"click",w),re(e,"contextmenu",Xt(y))],f=!0)},p(E,A){t=E;const I={};A&1&&(I.categoryId=t[24].categoryId),A&1&&(I.selected=t[24].selected),n.$set(I),(!b||A&1)&&o!==(o=t[24].description+"")&&Ne(g,o);const $={};A&1&&($.value=t[24].value),m.$set($)},i(E){b||(W(n.$$.fragment,E),W(m.$$.fragment,E),b=!0)},o(E){ee(n.$$.fragment,E),ee(m.$$.fragment,E),b=!1},d(E){E&&l(e),ke(n),ke(m),f=!1,Ge(v)}}}function yt(t){let e,a=t[21].date.toLocaleDateString()+"",n,_,d,o,g=t[21].transactions,p=[];for(let r=0;r<g.length;r+=1)p[r]=At(Vt(t,g,r));const m=r=>ee(p[r],1,1,()=>{p[r]=null});return{c(){e=i("div"),n=G(a),_=T();for(let r=0;r<p.length;r+=1)p[r].c();d=vt(),this.h()},l(r){e=u(r,"DIV",{class:!0});var b=h(e);n=K(b,a),b.forEach(l),_=S(r);for(let f=0;f<p.length;f+=1)p[f].l(r);d=vt(),this.h()},h(){c(e,"class","panel-block has-text-grey-light has-background-light")},m(r,b){z(r,e,b),s(e,n),z(r,_,b);for(let f=0;f<p.length;f+=1)p[f]&&p[f].m(r,b);z(r,d,b),o=!0},p(r,b){if((!o||b&1)&&a!==(a=r[21].date.toLocaleDateString()+"")&&Ne(n,a),b&17){g=r[21].transactions;let f;for(f=0;f<g.length;f+=1){const v=Vt(r,g,f);p[f]?(p[f].p(v,b),W(p[f],1)):(p[f]=At(v),p[f].c(),W(p[f],1),p[f].m(d.parentNode,d))}for(He(),f=g.length;f<p.length;f+=1)m(f);Qe()}},i(r){if(!o){for(let b=0;b<g.length;b+=1)W(p[b]);o=!0}},o(r){p=p.filter(Boolean);for(let b=0;b<p.length;b+=1)ee(p[b]);o=!1},d(r){r&&l(e),r&&l(_),ze(p,r),r&&l(d)}}}function pa(t){let e,a,n,_,d,o,g,p,m,r,b,f,v,w,y,E,A,I,$,N,O,q,L,V,C,X,j,Z,te,pe,x,ie,U,k,B,F,P,ae,he,se,ue,le,ne,me,H,Y,J,oe,De,Ve,de,Te,fe,Se,Ce,ve=t[0],R=[];for(let D=0;D<ve.length;D+=1)R[D]=yt($t(t,ve,D));const Le=D=>ee(R[D],1,1,()=>{R[D]=null});function Ue(D){t[16](D)}let Pe={};t[1]!==void 0&&(Pe.modal=t[1]),oe=new da({props:Pe}),Xe.push(()=>Ye(oe,"modal",Ue));function $e(D){t[17](D)}let Ae={};return t[2]!==void 0&&(Ae.modal=t[2]),de=new ma({props:Ae}),Xe.push(()=>Ye(de,"modal",$e)),{c(){e=i("nav"),a=i("div"),n=i("span"),_=G("Transactions"),d=T(),o=i("div"),g=i("div"),p=i("div"),m=i("button"),r=i("span"),b=i("i"),f=T(),v=i("div"),w=i("div"),y=i("a"),E=G("Current month"),I=T(),$=i("a"),N=G("1 month"),q=T(),L=i("a"),V=G("6 month"),X=T(),j=i("a"),Z=G("1 year"),pe=T(),x=i("a"),ie=G("All"),k=T(),B=i("div"),F=i("div"),P=i("button"),ae=i("span"),he=i("i"),se=T(),ue=i("div"),le=i("div"),ne=i("a"),me=i("i"),H=G(" Import transactions"),Y=T();for(let D=0;D<R.length;D+=1)R[D].c();J=T(),Ee(oe.$$.fragment),Ve=T(),Ee(de.$$.fragment),this.h()},l(D){e=u(D,"NAV",{class:!0});var M=h(e);a=u(M,"DIV",{class:!0});var ce=h(a);n=u(ce,"SPAN",{class:!0});var _e=h(n);_=K(_e,"Transactions"),_e.forEach(l),d=S(ce),o=u(ce,"DIV",{});var Q=h(o);g=u(Q,"DIV",{class:!0});var ge=h(g);p=u(ge,"DIV",{class:!0});var et=h(p);m=u(et,"BUTTON",{class:!0,"aria-haspopup":!0});var tt=h(m);r=u(tt,"SPAN",{class:!0});var at=h(r);b=u(at,"I",{class:!0}),h(b).forEach(l),at.forEach(l),tt.forEach(l),et.forEach(l),f=S(ge),v=u(ge,"DIV",{class:!0,role:!0});var st=h(v);w=u(st,"DIV",{class:!0});var be=h(w);y=u(be,"A",{class:!0});var lt=h(y);E=K(lt,"Current month"),lt.forEach(l),I=S(be),$=u(be,"A",{class:!0});var nt=h($);N=K(nt,"1 month"),nt.forEach(l),q=S(be),L=u(be,"A",{class:!0});var ot=h(L);V=K(ot,"6 month"),ot.forEach(l),X=S(be),j=u(be,"A",{class:!0});var rt=h(j);Z=K(rt,"1 year"),rt.forEach(l),pe=S(be),x=u(be,"A",{class:!0});var ct=h(x);ie=K(ct,"All"),ct.forEach(l),be.forEach(l),st.forEach(l),ge.forEach(l),k=S(Q),B=u(Q,"DIV",{class:!0});var Fe=h(B);F=u(Fe,"DIV",{class:!0});var it=h(F);P=u(it,"BUTTON",{class:!0,"aria-haspopup":!0});var ut=h(P);ae=u(ut,"SPAN",{class:!0});var dt=h(ae);he=u(dt,"I",{class:!0}),h(he).forEach(l),dt.forEach(l),ut.forEach(l),it.forEach(l),se=S(Fe),ue=u(Fe,"DIV",{class:!0,role:!0});var ft=h(ue);le=u(ft,"DIV",{class:!0});var ht=h(le);ne=u(ht,"A",{class:!0});var Ke=h(ne);me=u(Ke,"I",{class:!0}),h(me).forEach(l),H=K(Ke," Import transactions"),Ke.forEach(l),ht.forEach(l),ft.forEach(l),Fe.forEach(l),Q.forEach(l),ce.forEach(l),Y=S(M);for(let We=0;We<R.length;We+=1)R[We].l(M);M.forEach(l),J=S(D),Ie(oe.$$.fragment,D),Ve=S(D),Ie(de.$$.fragment,D),this.h()},h(){c(n,"class","has-text-grey-lighter"),c(b,"class","fa-solid fa-filter"),c(r,"class","icon is-small"),c(m,"class","button is-small is-light"),c(m,"aria-haspopup","true"),c(p,"class","dropdown-trigger"),c(y,"class",A="dropdown-item "+(t[3]==0?"is-active":"")),c($,"class",O="dropdown-item "+(t[3]==1?"is-active":"")),c(L,"class",C="dropdown-item "+(t[3]==6?"is-active":"")),c(j,"class",te="dropdown-item "+(t[3]==12?"is-active":"")),c(x,"class",U="dropdown-item "+(t[3]==-1?"is-active":"")),c(w,"class","dropdown-content"),c(v,"class","dropdown-menu"),c(v,"role","menu"),c(g,"class","dropdown is-right"),c(he,"class","fa-solid fa-ellipsis-vertical"),c(ae,"class","icon is-small"),c(P,"class","button is-small is-light"),c(P,"aria-haspopup","true"),c(F,"class","dropdown-trigger"),c(me,"class","fa-solid fa-file-import"),c(ne,"class","dropdown-item"),c(le,"class","dropdown-content"),c(ue,"class","dropdown-menu"),c(ue,"role","menu"),c(B,"class","dropdown is-right"),c(a,"class","panel-block flex-container"),c(e,"class","panel")},m(D,M){z(D,e,M),s(e,a),s(a,n),s(n,_),s(a,d),s(a,o),s(o,g),s(g,p),s(p,m),s(m,r),s(r,b),s(g,f),s(g,v),s(v,w),s(w,y),s(y,E),s(w,I),s(w,$),s($,N),s(w,q),s(w,L),s(L,V),s(w,X),s(w,j),s(j,Z),s(w,pe),s(w,x),s(x,ie),s(o,k),s(o,B),s(B,F),s(F,P),s(P,ae),s(ae,he),s(B,se),s(B,ue),s(ue,le),s(le,ne),s(ne,me),s(ne,H),s(e,Y);for(let ce=0;ce<R.length;ce+=1)R[ce]&&R[ce].m(e,null);z(D,J,M),we(oe,D,M),z(D,Ve,M),we(de,D,M),fe=!0,Se||(Ce=[re(y,"click",t[9]),re($,"click",t[10]),re(L,"click",t[11]),re(j,"click",t[12]),re(x,"click",t[13]),re(ne,"click",t[5])],Se=!0)},p(D,[M]){if((!fe||M&8&&A!==(A="dropdown-item "+(D[3]==0?"is-active":"")))&&c(y,"class",A),(!fe||M&8&&O!==(O="dropdown-item "+(D[3]==1?"is-active":"")))&&c($,"class",O),(!fe||M&8&&C!==(C="dropdown-item "+(D[3]==6?"is-active":"")))&&c(L,"class",C),(!fe||M&8&&te!==(te="dropdown-item "+(D[3]==12?"is-active":"")))&&c(j,"class",te),(!fe||M&8&&U!==(U="dropdown-item "+(D[3]==-1?"is-active":"")))&&c(x,"class",U),M&17){ve=D[0];let Q;for(Q=0;Q<ve.length;Q+=1){const ge=$t(D,ve,Q);R[Q]?(R[Q].p(ge,M),W(R[Q],1)):(R[Q]=yt(ge),R[Q].c(),W(R[Q],1),R[Q].m(e,null))}for(He(),Q=ve.length;Q<R.length;Q+=1)Le(Q);Qe()}const ce={};!De&&M&2&&(De=!0,ce.modal=D[1],Je(()=>De=!1)),oe.$set(ce);const _e={};!Te&&M&4&&(Te=!0,_e.modal=D[2],Je(()=>Te=!1)),de.$set(_e)},i(D){if(!fe){for(let M=0;M<ve.length;M+=1)W(R[M]);W(oe.$$.fragment,D),W(de.$$.fragment,D),fe=!0}},o(D){R=R.filter(Boolean);for(let M=0;M<R.length;M+=1)ee(R[M]);ee(oe.$$.fragment,D),ee(de.$$.fragment,D),fe=!1},d(D){D&&l(e),ze(R,D),D&&l(J),ke(oe,D),D&&l(Ve),ke(de,D),Se=!1,Ge(Ce)}}}function va(t,e,a){let n;ye(t,Ze,V=>a(18,n=V));let _=[],d=null,o=null,g=0;function p(V,C){Ht.show({x:V.pageX,y:V.pageY},[{title:"Set category",icon:"fa-solid fa-tag",action:r},{title:"Remove",icon:"fa-solid fa-trash",style:"has-text-danger",action:b}])}function m(){o.show(v)}function r(){d.show().then(V=>{Be.updateCategory(w.filter(C=>C.selected),V)})}function b(){const V=w.filter(C=>C.selected);Nt.show(`Are you sure you want to delete these transactions (${V.length}) ?`,"Delete transactions","is-danger").then(C=>{C&&Be.remove(V)})}function f(V){a(3,g=V);let C=null;switch(V){case 0:C=St();break;case 1:C=new Date(new Date().setMonth(new Date().getMonth()-1));break;case 6:C=new Date(new Date().setMonth(new Date().getMonth()-6));break;case 12:C=new Date(new Date().setMonth(new Date().getMonth()-12));break;default:C=null}Wt(Ze,n.date=C,n)}let{accountId:v=null}=e,{transactions:w=null}=e;const y=()=>f(0),E=()=>f(1),A=()=>f(6),I=()=>f(12),$=()=>f(-1),N=(V,C,X)=>{a(0,C[X].selected=!V.selected,_)},O=(V,C,X,j)=>{a(0,C[X].selected=!0,_),p(j)};function q(V){d=V,a(1,d)}function L(V){o=V,a(2,o)}return t.$$set=V=>{"accountId"in V&&a(7,v=V.accountId),"transactions"in V&&a(8,w=V.transactions)},t.$$.update=()=>{t.$$.dirty&256&&a(0,_=Be.groupTransactionsByDate(w))},[_,d,o,g,p,m,f,v,w,y,E,A,I,$,N,O,q,L]}class _a extends Me{constructor(e){super(),Re(this,e,va,pa,Oe,{accountId:7,transactions:8})}}function ga(t){var f;let e,a,n,_,d,o,g,p,m,r,b;return n=new ca({props:{account:t[0],transactionsRecap:t[1]}}),g=new zt({props:{transactionsRecap:t[1]}}),r=new _a({props:{transactions:t[2],accountId:(f=t[0])==null?void 0:f.id}}),{c(){e=i("div"),a=i("div"),Ee(n.$$.fragment),_=T(),d=i("div"),o=i("div"),Ee(g.$$.fragment),p=T(),m=i("div"),Ee(r.$$.fragment),this.h()},l(v){e=u(v,"DIV",{class:!0});var w=h(e);a=u(w,"DIV",{class:!0});var y=h(a);Ie(n.$$.fragment,y),y.forEach(l),_=S(w),d=u(w,"DIV",{class:!0});var E=h(d);o=u(E,"DIV",{class:!0});var A=h(o);Ie(g.$$.fragment,A),A.forEach(l),E.forEach(l),w.forEach(l),p=S(v),m=u(v,"DIV",{});var I=h(m);Ie(r.$$.fragment,I),I.forEach(l),this.h()},h(){c(a,"class","column pb-2"),c(o,"class","flex-list"),c(d,"class","column pb-2"),c(e,"class","columns is-variable is-1 mb-0")},m(v,w){z(v,e,w),s(e,a),we(n,a,null),s(e,_),s(e,d),s(d,o),we(g,o,null),z(v,p,w),z(v,m,w),we(r,m,null),b=!0},p(v,[w]){var I;const y={};w&1&&(y.account=v[0]),w&2&&(y.transactionsRecap=v[1]),n.$set(y);const E={};w&2&&(E.transactionsRecap=v[1]),g.$set(E);const A={};w&4&&(A.transactions=v[2]),w&1&&(A.accountId=(I=v[0])==null?void 0:I.id),r.$set(A)},i(v){b||(W(n.$$.fragment,v),W(g.$$.fragment,v),W(r.$$.fragment,v),b=!0)},o(v){ee(n.$$.fragment,v),ee(g.$$.fragment,v),ee(r.$$.fragment,v),b=!1},d(v){v&&l(e),ke(n),ke(g),v&&l(p),v&&l(m),ke(r)}}}function ba(t,e,a){let n,_,d;return ye(t,aa,o=>a(0,n=o)),ye(t,sa,o=>a(1,_=o)),ye(t,Pt,o=>a(2,d=o)),[n,_,d]}class Ta extends Me{constructor(e){super(),Re(this,e,ba,ga,Oe,{})}}export{Ta as component,ya as universal};
