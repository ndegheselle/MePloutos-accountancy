import{S as z,i as B,s as q,e as S,b as E,C as T,h as u,D as H,k as v,a as k,q as A,l as b,m as $,c as w,r as L,n as m,E as _,F as V,u as j,G as ye,H as Se,p as W,I as fe,J as Ce,K as Te,L as ue,M as De,y as G,N as Ne,z as J,A as K,O as Ie,P as Ae,Q as Le,g as P,d as M,B as Y,o as Oe}from"../chunks/index.ecd3f872.js";import{a as Pe}from"../chunks/Alert.858543de.js";import{c as de}from"../chunks/Confirm.eda23a4f.js";import{c as Me}from"../chunks/ContextMenu.861c86bb.js";import{w as Ve}from"../chunks/index.b5ec8d3d.js";import{d as X}from"../chunks/BaseRepo.b0f9c191.js";import{P as le,i as ke,c as je}from"../chunks/store.ced03d2a.js";import{S as ze,E as Be,c as qe}from"../chunks/save.02a1bd69.js";import"../chunks/dexie-export-import.04a54359.js";const He=!1,Re=!1,St=Object.freeze(Object.defineProperty({__proto__:null,prerender:He,ssr:Re},Symbol.toStringTag,{value:"Module"}));function _e(l){let t,e,s,o,n=l[0].message+"",c,r,f,p;return{c(){t=v("div"),e=v("div"),s=v("button"),o=k(),c=A(n),this.h()},l(i){t=b(i,"DIV",{class:!0});var g=$(t);e=b(g,"DIV",{class:!0});var d=$(e);s=b(d,"BUTTON",{class:!0}),$(s).forEach(u),o=w(d),c=L(d,n),d.forEach(u),g.forEach(u),this.h()},h(){m(s,"class","delete"),m(e,"class",r="notification "+l[0].type+" svelte-1sjczob"),m(t,"class","notification-container svelte-1sjczob")},m(i,g){E(i,t,g),_(t,e),_(e,s),_(e,o),_(e,c),f||(p=V(s,"click",l[2]),f=!0)},p(i,g){g&1&&n!==(n=i[0].message+"")&&j(c,n),g&1&&r!==(r="notification "+i[0].type+" svelte-1sjczob")&&m(e,"class",r)},d(i){i&&u(t),f=!1,p()}}}function Ue(l){let t,e=l[1]>0&&_e(l);return{c(){e&&e.c(),t=S()},l(s){e&&e.l(s),t=S()},m(s,o){e&&e.m(s,o),E(s,t,o)},p(s,[o]){s[1]>0?e?e.p(s,o):(e=_e(s),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:T,o:T,d(s){e&&e.d(s),s&&u(t)}}}const Fe=3e3;function Qe(l,t,e){let s;H(l,Pe,r=>e(0,s=r));let o=0;const n=r=>{r&&(e(1,o++,o),setTimeout(()=>{o>0&&e(1,o--,o)},Fe))},c=()=>e(1,o=0);return l.$$.update=()=>{l.$$.dirty&1&&n(s)},[s,o,c]}class We extends z{constructor(t){super(),B(this,t,Qe,Ue,q,{})}}function me(l){let t,e,s,o,n,c,r=l[0].title+"",f,p,i,g,d,a,h=l[0].message+"",R,Z,D,I,x,ee,N,te,U,se,oe;return{c(){t=v("div"),e=v("div"),s=k(),o=v("div"),n=v("header"),c=v("p"),f=A(r),p=k(),i=v("button"),g=k(),d=v("section"),a=v("p"),R=A(h),Z=k(),D=v("footer"),I=v("button"),x=A("Cancel"),ee=k(),N=v("button"),te=A("Confirm"),this.h()},l(C){t=b(C,"DIV",{class:!0});var y=$(t);e=b(y,"DIV",{class:!0}),$(e).forEach(u),s=w(y),o=b(y,"DIV",{class:!0});var O=$(o);n=b(O,"HEADER",{class:!0});var F=$(n);c=b(F,"P",{class:!0});var ne=$(c);f=L(ne,r),ne.forEach(u),p=w(F),i=b(F,"BUTTON",{class:!0,"aria-label":!0}),$(i).forEach(u),F.forEach(u),g=w(O),d=b(O,"SECTION",{class:!0});var ae=$(d);a=b(ae,"P",{});var ie=$(a);R=L(ie,h),ie.forEach(u),ae.forEach(u),Z=w(O),D=b(O,"FOOTER",{class:!0});var Q=$(D);I=b(Q,"BUTTON",{class:!0,"aria-label":!0});var re=$(I);x=L(re,"Cancel"),re.forEach(u),ee=w(Q),N=b(Q,"BUTTON",{class:!0});var ce=$(N);te=L(ce,"Confirm"),ce.forEach(u),Q.forEach(u),O.forEach(u),y.forEach(u),this.h()},h(){m(e,"class","modal-background"),m(c,"class","modal-card-title"),m(i,"class","delete"),m(i,"aria-label","close"),m(n,"class","modal-card-head"),m(d,"class","modal-card-body"),m(I,"class","button"),m(I,"aria-label","close"),m(N,"class",U="button "+l[0].type),m(D,"class","modal-card-foot is-justify-content-flex-end p-2"),m(o,"class","modal-card"),m(t,"class","modal is-active")},m(C,y){E(C,t,y),_(t,e),_(t,s),_(t,o),_(o,n),_(n,c),_(c,f),_(n,p),_(n,i),_(o,g),_(o,d),_(d,a),_(a,R),_(o,Z),_(o,D),_(D,I),_(I,x),_(D,ee),_(D,N),_(N,te),se||(oe=[V(N,"click",l[2]),V(t,"closing",l[3])],se=!0)},p(C,y){y&1&&r!==(r=C[0].title+"")&&j(f,r),y&1&&h!==(h=C[0].message+"")&&j(R,h),y&1&&U!==(U="button "+C[0].type)&&m(N,"class",U)},d(C){C&&u(t),se=!1,ye(oe)}}}function Ge(l){let t,e=l[0].show&&me(l);return{c(){e&&e.c(),t=S()},l(s){e&&e.l(s),t=S()},m(s,o){e&&e.m(s,o),E(s,t,o)},p(s,[o]){s[0].show?e?e.p(s,o):(e=me(s),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:T,o:T,d(s){e&&e.d(s),s&&u(t)}}}function Je(l,t,e){let s;H(l,de,r=>e(0,s=r));function o(r){Se(de,s.show=!1,s),s.callback(r)}return[s,o,()=>o(!0),()=>o(!1)]}class Ke extends z{constructor(t){super(),B(this,t,Je,Ge,q,{})}}function pe(l,t,e){const s=l.slice();return s[2]=t[e],s}function he(l){let t,e,s,o,n,c=l[0].items,r=[];for(let f=0;f<c.length;f+=1)r[f]=be(pe(l,c,f));return{c(){t=v("div"),e=v("div"),s=v("div");for(let f=0;f<r.length;f+=1)r[f].c();this.h()},l(f){t=b(f,"DIV",{class:!0,style:!0});var p=$(t);e=b(p,"DIV",{class:!0,id:!0,role:!0});var i=$(e);s=b(i,"DIV",{class:!0});var g=$(s);for(let d=0;d<r.length;d+=1)r[d].l(g);g.forEach(u),i.forEach(u),p.forEach(u),this.h()},h(){m(s,"class","dropdown-content"),m(e,"class","dropdown-menu"),m(e,"id","dropdown-menu"),m(e,"role","menu"),m(t,"class","context-menu dropdown svelte-17947hb"),W(t,"left",l[0].position.x+"px"),W(t,"top",l[0].position.y+"px"),fe(t,"is-active",l[0].show)},m(f,p){E(f,t,p),_(t,e),_(e,s);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(s,null);o||(n=V(t,"closing",function(){Ce(l[0].show=!1)&&(l[0].show=!1).apply(this,arguments)}),o=!0)},p(f,p){if(l=f,p&1){c=l[0].items;let i;for(i=0;i<c.length;i+=1){const g=pe(l,c,i);r[i]?r[i].p(g,p):(r[i]=be(g),r[i].c(),r[i].m(s,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=c.length}p&1&&W(t,"left",l[0].position.x+"px"),p&1&&W(t,"top",l[0].position.y+"px"),p&1&&fe(t,"is-active",l[0].show)},d(f){f&&u(t),Te(r,f),o=!1,n()}}}function Ye(l){let t,e,s,o=l[2].title+"",n,c,r,f,p,i=l[2].icon&&ve(l);function g(){return l[1](l[2])}return{c(){t=v("a"),e=v("span"),i&&i.c(),s=k(),n=A(o),c=k(),this.h()},l(d){t=b(d,"A",{class:!0});var a=$(t);e=b(a,"SPAN",{class:!0});var h=$(e);i&&i.l(h),s=w(h),n=L(h,o),h.forEach(u),c=w(a),a.forEach(u),this.h()},h(){m(e,"class","icon-text"),m(t,"class",r="dropdown-item "+(l[2].style||"")+" svelte-17947hb")},m(d,a){E(d,t,a),_(t,e),i&&i.m(e,null),_(e,s),_(e,n),_(t,c),f||(p=V(t,"click",g),f=!0)},p(d,a){l=d,l[2].icon?i?i.p(l,a):(i=ve(l),i.c(),i.m(e,s)):i&&(i.d(1),i=null),a&1&&o!==(o=l[2].title+"")&&j(n,o),a&1&&r!==(r="dropdown-item "+(l[2].style||"")+" svelte-17947hb")&&m(t,"class",r)},d(d){d&&u(t),i&&i.d(),f=!1,p()}}}function Xe(l){let t;return{c(){t=v("hr"),this.h()},l(e){t=b(e,"HR",{class:!0}),this.h()},h(){m(t,"class","dropdown-divider")},m(e,s){E(e,t,s)},p:T,d(e){e&&u(t)}}}function ve(l){let t,e,s;return{c(){t=v("span"),e=v("i"),this.h()},l(o){t=b(o,"SPAN",{class:!0});var n=$(t);e=b(n,"I",{class:!0}),$(e).forEach(u),n.forEach(u),this.h()},h(){m(e,"class",s=ue(l[2].icon)+" svelte-17947hb"),m(t,"class","icon")},m(o,n){E(o,t,n),_(t,e)},p(o,n){n&1&&s!==(s=ue(o[2].icon)+" svelte-17947hb")&&m(e,"class",s)},d(o){o&&u(t)}}}function be(l){let t;function e(n,c){return n[2]=="divider"?Xe:Ye}let s=e(l),o=s(l);return{c(){o.c(),t=S()},l(n){o.l(n),t=S()},m(n,c){o.m(n,c),E(n,t,c)},p(n,c){s===(s=e(n))&&o?o.p(n,c):(o.d(1),o=s(n),o&&(o.c(),o.m(t.parentNode,t)))},d(n){o.d(n),n&&u(t)}}}function Ze(l){let t,e=l[0].show&&he(l);return{c(){e&&e.c(),t=S()},l(s){e&&e.l(s),t=S()},m(s,o){e&&e.m(s,o),E(s,t,o)},p(s,[o]){s[0].show?e?e.p(s,o):(e=he(s),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:T,o:T,d(s){e&&e.d(s),s&&u(t)}}}function xe(l,t,e){let s;return H(l,Me,n=>e(0,s=n)),[s,n=>n.action(s.context)]}class et extends z{constructor(t){super(),B(this,t,xe,Ze,q,{})}}const tt=Ve({show:!1,message:"Loading..."});function $e(l){let t,e,s,o,n=l[0].message+"",c;return{c(){t=v("div"),e=v("span"),s=k(),o=v("span"),c=A(n),this.h()},l(r){t=b(r,"DIV",{class:!0});var f=$(t);e=b(f,"SPAN",{class:!0}),$(e).forEach(u),s=w(f),o=b(f,"SPAN",{class:!0});var p=$(o);c=L(p,n),p.forEach(u),f.forEach(u),this.h()},h(){m(e,"class","loader svelte-1qrh9ba"),m(o,"class","ml-2"),m(t,"class","loading-container has-background-light svelte-1qrh9ba")},m(r,f){E(r,t,f),_(t,e),_(t,s),_(t,o),_(o,c)},p(r,f){f&1&&n!==(n=r[0].message+"")&&j(c,n)},d(r){r&&u(t)}}}function st(l){let t,e=l[0].show&&$e(l);return{c(){e&&e.c(),t=S()},l(s){e&&e.l(s),t=S()},m(s,o){e&&e.m(s,o),E(s,t,o)},p(s,[o]){s[0].show?e?e.p(s,o):(e=$e(s),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:T,o:T,d(s){e&&e.d(s),s&&u(t)}}}function lt(l,t,e){let s;return H(l,tt,o=>e(0,s=o)),[s]}class ot extends z{constructor(t){super(),B(this,t,lt,st,q,{})}}const nt=[{selector:'.modal-background, .modal button[aria-label="close"]',callback:function(l){const t=l.closest(".modal");we(t)}},{selector:'.dropdown-trigger [aria-haspopup="true"]',callback:function(l){const t=l.closest(".dropdown");it(t)}}];function at(l){l.classList.contains("is-active")&&l.dispatchEvent(new Event("closing"))}function it(l){l.classList.add("is-active")}function we(l){at(l),l.classList.remove("is-active")}function ge(l){(document.querySelectorAll(l)||[]).forEach(t=>{we(t)})}function rt(){document.addEventListener("click",function(l){for(const t of nt){let e=l.target.closest(t.selector);if(e)return t.callback(e)}ge(".dropdown.is-active")}),document.addEventListener("keydown",l=>{(l||window.event).code==="Escape"&&(ge(".dropdown.is-active"),sendClosingAll(".context-menu.is-active, .modal.is-active"))})}function ct(){rt()}function ft(l){if(!l)return;let t="";for(const e of l)t+=`.category-${e.id} {stroke: ${e.color};}`;document.getElementById("generatedStyles").innerHTML=t}let Ee;function ut(l){clearTimeout(Ee),Ee=setTimeout(async function(){const t=await X.export({filter:function(e){return e!=="transactions"}});await ze.saveDatabase(await t.text())},3e3)}function dt(){X.on("ready",function(){X.params.get(le.userId).then(l=>{l||X.params.add(new le(le.userId))})}),ke()&&document.addEventListener("accountancy://db-table-updated",ut)}function _t(){Be(qe.WINDOW_CLOSE_REQUESTED,async l=>{alert("Closing window and maybe saving some data :)")})}function mt(l){let t,e,s,o,n,c,r,f,p,i;const g=l[2].default,d=De(g,l,l[1],null);return s=new ot({}),n=new We({}),r=new Ke({}),p=new et({}),{c(){t=k(),d&&d.c(),e=k(),G(s.$$.fragment),o=k(),G(n.$$.fragment),c=k(),G(r.$$.fragment),f=k(),G(p.$$.fragment),this.h()},l(a){Ne("svelte-16lwrtz",document.head).forEach(u),t=w(a),d&&d.l(a),e=w(a),J(s.$$.fragment,a),o=w(a),J(n.$$.fragment,a),c=w(a),J(r.$$.fragment,a),f=w(a),J(p.$$.fragment,a),this.h()},h(){document.title="MePloutos - Home"},m(a,h){E(a,t,h),d&&d.m(a,h),E(a,e,h),K(s,a,h),E(a,o,h),K(n,a,h),E(a,c,h),K(r,a,h),E(a,f,h),K(p,a,h),i=!0},p(a,[h]){d&&d.p&&(!i||h&2)&&Ie(d,g,a,a[1],i?Le(g,a[1],h,null):Ae(a[1]),null)},i(a){i||(P(d,a),P(s.$$.fragment,a),P(n.$$.fragment,a),P(r.$$.fragment,a),P(p.$$.fragment,a),i=!0)},o(a){M(d,a),M(s.$$.fragment,a),M(n.$$.fragment,a),M(r.$$.fragment,a),M(p.$$.fragment,a),i=!1},d(a){a&&u(t),d&&d.d(a),a&&u(e),Y(s,a),a&&u(o),Y(n,a),a&&u(c),Y(r,a),a&&u(f),Y(p,a)}}}function pt(l,t,e){let s;H(l,je,c=>e(0,s=c));let{$$slots:o={},$$scope:n}=t;return Oe(async()=>{ke()&&_t(),dt(),ct()}),l.$$set=c=>{"$$scope"in c&&e(1,n=c.$$scope)},l.$$.update=()=>{l.$$.dirty&1&&ft(s)},[s,n,o]}class Ct extends z{constructor(t){super(),B(this,t,pt,mt,q,{})}}export{Ct as component,St as universal};
