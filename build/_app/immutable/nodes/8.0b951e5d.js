import{S as xe,i as Ce,s as Ue,w as Oe,R as Fe,a as $,k as l,q as X,y as _e,N as Ge,h as t,c as y,l as r,m as n,r as Y,z as be,n as a,b as ie,E as e,A as ge,F as we,u as Re,g as ne,f as Ke,T as je,d as ce,B as Ee,K as He,D as Je,G as Le,v as Qe}from"../chunks/index.ecd3f872.js";import{a as We}from"../chunks/Confirm.eda23a4f.js";import{d as Xe}from"../chunks/index.b5ec8d3d.js";import{S as qe,a as Ye}from"../chunks/subscriptions.435749da.js";import{g as Ze}from"../chunks/BaseRepo.b0f9c191.js";import{s as Me}from"../chunks/subscriptions.190aa1c2.js";import{C as es}from"../chunks/CreateUpdateModal.431ead9f.js";import{M as Ie}from"../chunks/Money.8cb7f686.js";const ss=Xe(Ze(()=>qe.getAll()),o=>o||[]);function Te(o,_,p){const d=o.slice();return d[8]=_[p],d}function Be(o){let _,p,d,f,h,S,G,x=o[8].name+"",N,Q,u,b,w,K,z,ee,C,g,E,W,j,se,M,D,H,U,A,k,te,V,J,T,O,ae,le;function L(){return o[5](o[8])}function oe(){return o[6](o[8])}return k=new Ie({props:{class:"is-size-4 title mb-0 has-text-link",value:o[8].price/o[8].dueEvery}}),{c(){_=l("div"),p=l("div"),d=l("div"),f=l("div"),h=l("span"),S=l("i"),G=$(),N=X(x),Q=$(),u=l("div"),b=l("div"),w=l("button"),K=l("span"),z=l("i"),ee=$(),C=l("div"),g=l("div"),E=l("a"),W=l("i"),j=X(` Edit\r
                                        subscription`),se=$(),M=l("a"),D=l("i"),H=X(` Delete\r
                                        subscription`),U=$(),A=l("div"),_e(k.$$.fragment),te=$(),V=l("span"),J=X("per month"),T=$(),this.h()},l(m){_=r(m,"DIV",{class:!0});var B=n(_);p=r(B,"DIV",{class:!0});var F=n(p);d=r(F,"DIV",{class:!0});var Z=n(d);f=r(Z,"DIV",{class:!0});var re=n(f);h=r(re,"SPAN",{class:!0});var R=n(h);S=r(R,"I",{class:!0}),n(S).forEach(t),G=y(R),N=Y(R,x),R.forEach(t),Q=y(re),u=r(re,"DIV",{class:!0});var i=n(u);b=r(i,"DIV",{class:!0});var pe=n(b);w=r(pe,"BUTTON",{class:!0,"aria-haspopup":!0});var fe=n(w);K=r(fe,"SPAN",{class:!0});var de=n(K);z=r(de,"I",{class:!0}),n(z).forEach(t),de.forEach(t),fe.forEach(t),pe.forEach(t),ee=y(i),C=r(i,"DIV",{class:!0,role:!0});var s=n(C);g=r(s,"DIV",{class:!0});var c=n(g);E=r(c,"A",{class:!0});var I=n(E);W=r(I,"I",{class:!0}),n(W).forEach(t),j=Y(I,` Edit\r
                                        subscription`),I.forEach(t),se=y(c),M=r(c,"A",{class:!0});var P=n(M);D=r(P,"I",{class:!0}),n(D).forEach(t),H=Y(P,` Delete\r
                                        subscription`),P.forEach(t),c.forEach(t),s.forEach(t),i.forEach(t),re.forEach(t),U=y(Z),A=r(Z,"DIV",{});var q=n(A);be(k.$$.fragment,q),te=y(q),V=r(q,"SPAN",{class:!0});var v=n(V);J=Y(v,"per month"),v.forEach(t),q.forEach(t),Z.forEach(t),F.forEach(t),T=y(B),B.forEach(t),this.h()},h(){a(S,"class","fa-solid fa-dollar-sign has-text-grey-lighter"),a(h,"class","title is-size-4 subscription-title mb-0 svelte-1wsrubs"),a(z,"class","fa-solid fa-ellipsis-vertical"),a(K,"class","icon is-small"),a(w,"class","button is-small is-light"),a(w,"aria-haspopup","true"),a(b,"class","dropdown-trigger"),a(W,"class","fa-solid fa-file-pen mr-1"),a(E,"class","dropdown-item"),a(D,"class","fa-solid fa-trash mr-1"),a(M,"class","dropdown-item has-text-danger"),a(g,"class","dropdown-content"),a(C,"class","dropdown-menu"),a(C,"role","menu"),a(u,"class","dropdown is-right"),a(f,"class","flex-container"),a(V,"class","is-size-6 has-text-grey-lighter"),a(d,"class","is-fullwidth"),a(p,"class","box is-fullheight flex-container"),a(_,"class","column is-one-third p-1")},m(m,B){ie(m,_,B),e(_,p),e(p,d),e(d,f),e(f,h),e(h,S),e(h,G),e(h,N),e(f,Q),e(f,u),e(u,b),e(b,w),e(w,K),e(K,z),e(u,ee),e(u,C),e(C,g),e(g,E),e(E,W),e(E,j),e(g,se),e(g,M),e(M,D),e(M,H),e(d,U),e(d,A),ge(k,A,null),e(A,te),e(A,V),e(V,J),e(_,T),O=!0,ae||(le=[we(E,"click",L),we(M,"click",oe)],ae=!0)},p(m,B){o=m,(!O||B&1)&&x!==(x=o[8].name+"")&&Re(N,x);const F={};B&1&&(F.value=o[8].price/o[8].dueEvery),k.$set(F)},i(m){O||(ne(k.$$.fragment,m),O=!0)},o(m){ce(k.$$.fragment,m),O=!1},d(m){m&&t(_),Ee(k),ae=!1,Le(le)}}}function ts(o){let _,p,d,f,h,S=o[2].number+"",G,x,N,Q,u,b,w,K,z,ee,C,g,E,W,j,se,M,D,H,U,A,k,te,V,J,T,O,ae,le,L,oe,m,B,F,Z,re;w=new Ie({props:{class:"title mb-0 has-text-link",value:o[2].perMonth}}),E=new Ie({props:{class:"title mb-0 has-text-link",value:o[2].perMonth*12}});let R=o[0],i=[];for(let s=0;s<R.length;s+=1)i[s]=Be(Te(o,R,s));const pe=s=>ce(i[s],1,1,()=>{i[s]=null});function fe(s){o[7](s)}let de={name:"Investment",repo:qe,form:[[{prop:"name"}],[{prop:"price"},{prop:"dueEvery",label:"Due every",type:[{value:1,label:"Every month"},{value:3,label:"Every quarter"},{value:6,label:"Every semester"},{value:12,label:"Every year"}]}]]};return o[1]!==void 0&&(de.modal=o[1]),m=new es({props:de}),Oe.push(()=>Fe(m,"modal",fe)),{c(){_=$(),p=l("div"),d=l("div"),f=l("span"),h=l("span"),G=X(S),x=$(),N=l("span"),Q=X("Subscriptions"),u=$(),b=l("span"),_e(w.$$.fragment),K=$(),z=l("span"),ee=X("per month"),C=$(),g=l("span"),_e(E.$$.fragment),W=$(),j=l("span"),se=X("per year"),M=$(),D=l("div"),H=l("div"),U=l("button"),A=l("span"),k=l("i"),te=$(),V=l("div"),J=l("div"),T=l("a"),O=l("i"),ae=X(" Add subscription"),le=$(),L=l("div");for(let s=0;s<i.length;s+=1)i[s].c();oe=$(),_e(m.$$.fragment),this.h()},l(s){Ge("svelte-1p4k54g",document.head).forEach(t),_=y(s),p=r(s,"DIV",{class:!0});var I=n(p);d=r(I,"DIV",{class:!0});var P=n(d);f=r(P,"SPAN",{class:!0});var q=n(f);h=r(q,"SPAN",{class:!0});var v=n(h);G=Y(v,S),v.forEach(t),x=y(q),N=r(q,"SPAN",{class:!0});var ue=n(N);Q=Y(ue,"Subscriptions"),ue.forEach(t),q.forEach(t),u=y(P),b=r(P,"SPAN",{class:!0});var he=n(b);be(w.$$.fragment,he),K=y(he),z=r(he,"SPAN",{class:!0});var Se=n(z);ee=Y(Se,"per month"),Se.forEach(t),he.forEach(t),C=y(P),g=r(P,"SPAN",{class:!0});var me=n(g);be(E.$$.fragment,me),W=y(me),j=r(me,"SPAN",{class:!0});var De=n(j);se=Y(De,"per year"),De.forEach(t),me.forEach(t),P.forEach(t),M=y(I),D=r(I,"DIV",{class:!0});var ve=n(D);H=r(ve,"DIV",{class:!0});var Ae=n(H);U=r(Ae,"BUTTON",{class:!0,"aria-haspopup":!0});var ke=n(U);A=r(ke,"SPAN",{class:!0});var Ve=n(A);k=r(Ve,"I",{class:!0}),n(k).forEach(t),Ve.forEach(t),ke.forEach(t),Ae.forEach(t),te=y(ve),V=r(ve,"DIV",{class:!0,role:!0});var Ne=n(V);J=r(Ne,"DIV",{class:!0});var Pe=n(J);T=r(Pe,"A",{class:!0});var $e=n(T);O=r($e,"I",{class:!0}),n(O).forEach(t),ae=Y($e," Add subscription"),$e.forEach(t),Pe.forEach(t),Ne.forEach(t),ve.forEach(t),I.forEach(t),le=y(s),L=r(s,"DIV",{class:!0});var ze=n(L);for(let ye=0;ye<i.length;ye+=1)i[ye].l(ze);ze.forEach(t),oe=y(s),be(m.$$.fragment,s),this.h()},h(){document.title="MePloutos - Subscriptions",a(h,"class","is-size-1 title mb-0"),a(N,"class","is-size-6 has-text-grey-lighter ml-2"),a(f,"class","text-header svelte-1wsrubs"),a(z,"class","is-size-6 has-text-grey-lighter ml-2"),a(b,"class","text-header svelte-1wsrubs"),a(j,"class","is-size-6 has-text-grey-lighter ml-2"),a(g,"class","text-header svelte-1wsrubs"),a(d,"class","flex-container"),a(k,"class","fa-solid fa-ellipsis-vertical"),a(A,"class","icon is-small"),a(U,"class","button is-small is-light"),a(U,"aria-haspopup","true"),a(H,"class","dropdown-trigger"),a(O,"class","fa-solid fa-plus"),a(T,"class","dropdown-item"),a(J,"class","dropdown-content"),a(V,"class","dropdown-menu"),a(V,"role","menu"),a(D,"class","dropdown is-right my-auto ml-4"),a(p,"class","box is-flex"),a(L,"class","columns is-multiline px-2")},m(s,c){ie(s,_,c),ie(s,p,c),e(p,d),e(d,f),e(f,h),e(h,G),e(f,x),e(f,N),e(N,Q),e(d,u),e(d,b),ge(w,b,null),e(b,K),e(b,z),e(z,ee),e(d,C),e(d,g),ge(E,g,null),e(g,W),e(g,j),e(j,se),e(p,M),e(p,D),e(D,H),e(H,U),e(U,A),e(A,k),e(D,te),e(D,V),e(V,J),e(J,T),e(T,O),e(T,ae),ie(s,le,c),ie(s,L,c);for(let I=0;I<i.length;I+=1)i[I]&&i[I].m(L,null);ie(s,oe,c),ge(m,s,c),F=!0,Z||(re=we(T,"click",o[4]),Z=!0)},p(s,[c]){(!F||c&4)&&S!==(S=s[2].number+"")&&Re(G,S);const I={};c&4&&(I.value=s[2].perMonth),w.$set(I);const P={};if(c&4&&(P.value=s[2].perMonth*12),E.$set(P),c&11){R=s[0];let v;for(v=0;v<R.length;v+=1){const ue=Te(s,R,v);i[v]?(i[v].p(ue,c),ne(i[v],1)):(i[v]=Be(ue),i[v].c(),ne(i[v],1),i[v].m(L,null))}for(Qe(),v=R.length;v<i.length;v+=1)pe(v);Ke()}const q={};!B&&c&2&&(B=!0,q.modal=s[1],je(()=>B=!1)),m.$set(q)},i(s){if(!F){ne(w.$$.fragment,s),ne(E.$$.fragment,s);for(let c=0;c<R.length;c+=1)ne(i[c]);ne(m.$$.fragment,s),F=!0}},o(s){ce(w.$$.fragment,s),ce(E.$$.fragment,s),i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)ce(i[c]);ce(m.$$.fragment,s),F=!1},d(s){s&&t(_),s&&t(p),Ee(w),Ee(E),s&&t(le),s&&t(L),He(i,s),s&&t(oe),Ee(m,s),Z=!1,re()}}}function as(o,_,p){let d,f;Je(o,ss,u=>p(0,f=u));let h=null;function S(u){We.show(`Are you sure you want to delete the subscription '${u.name}' ?`,"Delete subscription","is-danger").then(b=>{b&&Me.remove(u.id)})}const G=()=>h.show(new Ye),x=u=>h.show(u),N=u=>S(u);function Q(u){h=u,p(1,h)}return o.$$.update=()=>{o.$$.dirty&1&&p(2,d=Me.getSubscriptionsRecap(f))},[f,h,d,S,G,x,N,Q]}class ps extends xe{constructor(_){super(),Ce(this,_,as,ts,Ue,{})}}export{ps as component};
