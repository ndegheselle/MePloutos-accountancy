import{S as ee,i as te,s as se,k as _,q as H,a as T,y as K,l as g,m as $,r as U,h as c,c as z,z as O,n as m,b as j,E as r,A as X,g as M,d as q,B as Y,K as ve,D as Q,p as L,w as ke,R as Se,F as _e,v as ge,f as $e,T as De,U as Ve,H as Ne,u as Z,C as oe}from"../chunks/index.ecd3f872.js";import{T as Pe,C as Re,A as Te}from"../chunks/index.08da1576.js";import{d as be,w as Ee}from"../chunks/index.b5ec8d3d.js";import{T as ze,p as ce,A as Ae,a as Ce}from"../chunks/store.ced03d2a.js";import{I as Me}from"../chunks/investments.1f416521.js";import{S as Be}from"../chunks/subscriptions.435749da.js";import{g as qe}from"../chunks/BaseRepo.b0f9c191.js";import{M as re}from"../chunks/Money.8cb7f686.js";import{a as je}from"../chunks/ContextMenu.861c86bb.js";import{C as He}from"../chunks/CreateUpdateModal.431ead9f.js";import{i as Ue}from"../chunks/investments.7e17c491.js";import{s as Fe}from"../chunks/subscriptions.190aa1c2.js";const Ie=be(qe(()=>Ae.getAll()),a=>a||[]),Ke=be(ce,(a,e)=>{if(!(a!=null&&a.favoriteAccountId))return null;(async()=>{let t=await ze.getByAccount(a.favoriteAccountId,new Date(new Date().setMonth(new Date().getMonth()-1))),s=Pe.getTransactionsRecap(t);e(s)})()}),we=Ee([]),ye=Ee([]);(async()=>(we.set(await Me.getAll()),ye.set(await Be.getAll())))();function pe(a,e,t){const s=a.slice();return s[2]=e[t],s}function me(a){let e;return{c(){e=_("div"),this.h()},l(t){e=g(t,"DIV",{class:!0,style:!0}),$(e).forEach(c),this.h()},h(){m(e,"class","progress-bar svelte-194ehsc"),L(e,"background-color",a[2].color),L(e,"width",a[2].balance*100/a[1]+"%")},m(t,s){j(t,e,s)},p(t,s){s&1&&L(e,"background-color",t[2].color),s&3&&L(e,"width",t[2].balance*100/t[1]+"%")},d(t){t&&c(e)}}}function Oe(a){let e,t,s,n,l,p,D,h,V;p=new re({props:{value:a[1]}});let w=a[0],o=[];for(let u=0;u<w.length;u+=1)o[u]=me(pe(a,w,u));return{c(){e=_("div"),t=_("span"),s=H("Total"),n=T(),l=_("h1"),K(p.$$.fragment),D=T(),h=_("div");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){e=g(u,"DIV",{class:!0});var b=$(e);t=g(b,"SPAN",{class:!0});var P=$(t);s=U(P,"Total"),P.forEach(c),n=z(b),l=g(b,"H1",{class:!0});var f=$(l);O(p.$$.fragment,f),f.forEach(c),D=z(b),h=g(b,"DIV",{class:!0});var d=$(h);for(let v=0;v<o.length;v+=1)o[v].l(d);d.forEach(c),b.forEach(c),this.h()},h(){m(t,"class","has-text-grey-lighter box-title"),m(l,"class","title"),m(h,"class","progress"),m(e,"class","box mb-2")},m(u,b){j(u,e,b),r(e,t),r(t,s),r(e,n),r(e,l),X(p,l,null),r(e,D),r(e,h);for(let P=0;P<o.length;P+=1)o[P]&&o[P].m(h,null);V=!0},p(u,[b]){const P={};if(b&2&&(P.value=u[1]),p.$set(P),b&3){w=u[0];let f;for(f=0;f<w.length;f+=1){const d=pe(u,w,f);o[f]?o[f].p(d,b):(o[f]=me(d),o[f].c(),o[f].m(h,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=w.length}},i(u){V||(M(p.$$.fragment,u),V=!0)},o(u){q(p.$$.fragment,u),V=!1},d(u){u&&c(e),Y(p),ve(o,u)}}}function Xe(a,e,t){let s,n;return Q(a,Ie,l=>t(0,n=l)),a.$$.update=()=>{a.$$.dirty&1&&t(1,s=n.reduce((l,p)=>l+p.balance,0))},[n,s]}class Ye extends ee{constructor(e){super(),te(this,e,Xe,Oe,se,{})}}function de(a,e,t){const s=a.slice();return s[7]=e[t],s}function xe(a){let e,t=a[7].name+"",s;return{c(){e=_("span"),s=H(t)},l(n){e=g(n,"SPAN",{});var l=$(e);s=U(l,t),l.forEach(c)},m(n,l){j(n,e,l),r(e,s)},p(n,l){l&4&&t!==(t=n[7].name+"")&&Z(s,t)},d(n){n&&c(e)}}}function Ge(a){let e,t=a[7].name+"",s;return{c(){e=_("b"),s=H(t)},l(n){e=g(n,"B",{});var l=$(e);s=U(l,t),l.forEach(c)},m(n,l){j(n,e,l),r(e,s)},p(n,l){l&4&&t!==(t=n[7].name+"")&&Z(s,t)},d(n){n&&c(e)}}}function he(a){let e,t,s,n,l,p,D,h,V,w,o,u,b;function P(A,k){return A[1].favoriteAccountId==A[7].id?Ge:xe}let f=P(a),d=f(a);h=new re({props:{value:a[7].balance}});function v(...A){return a[5](a[7],...A)}return{c(){e=_("a"),t=_("span"),s=_("i"),l=T(),p=_("div"),d.c(),D=T(),K(h.$$.fragment),V=T(),this.h()},l(A){e=g(A,"A",{class:!0,href:!0});var k=$(e);t=g(k,"SPAN",{class:!0});var N=$(t);s=g(N,"I",{class:!0,style:!0}),$(s).forEach(c),N.forEach(c),l=z(k),p=g(k,"DIV",{class:!0});var i=$(p);d.l(i),D=z(i),O(h.$$.fragment,i),i.forEach(c),V=z(k),k.forEach(c),this.h()},h(){m(s,"class",n="fa-"+(a[1].favoriteAccountId==a[7].id?"solid":"regular")+" fa-folder"),L(s,"color",a[7].color),m(t,"class","panel-icon"),m(p,"class","flex-container"),m(e,"class","panel-block"),m(e,"href",w="/accounts/"+a[7].id)},m(A,k){j(A,e,k),r(e,t),r(t,s),r(e,l),r(e,p),d.m(p,null),r(p,D),X(h,p,null),r(e,V),o=!0,u||(b=_e(e,"contextmenu",Ve(v)),u=!0)},p(A,k){a=A,(!o||k&6&&n!==(n="fa-"+(a[1].favoriteAccountId==a[7].id?"solid":"regular")+" fa-folder"))&&m(s,"class",n),(!o||k&4)&&L(s,"color",a[7].color),f===(f=P(a))&&d?d.p(a,k):(d.d(1),d=f(a),d&&(d.c(),d.m(p,D)));const N={};k&4&&(N.value=a[7].balance),h.$set(N),(!o||k&4&&w!==(w="/accounts/"+a[7].id))&&m(e,"href",w)},i(A){o||(M(h.$$.fragment,A),o=!0)},o(A){q(h.$$.fragment,A),o=!1},d(A){A&&c(e),d.d(),Y(h),u=!1,b()}}}function Je(a){let e,t,s,n,l,p,D,h,V,w,o,u,b,P,f,d=a[2],v=[];for(let i=0;i<d.length;i+=1)v[i]=he(de(a,d,i));const A=i=>q(v[i],1,1,()=>{v[i]=null});function k(i){a[6](i)}let N={name:"Account",repo:Ae,form:[[{prop:"color",type:"color",class:"is-one-quarter"},{prop:"name"}]]};return a[0]!==void 0&&(N.modal=a[0]),o=new He({props:N}),ke.push(()=>Se(o,"modal",k)),{c(){e=_("div"),t=_("div"),s=_("span"),n=H("Accounts"),l=T(),p=_("button"),D=_("span"),h=_("i"),V=T();for(let i=0;i<v.length;i+=1)v[i].c();w=T(),K(o.$$.fragment),this.h()},l(i){e=g(i,"DIV",{class:!0});var I=$(e);t=g(I,"DIV",{class:!0});var S=$(t);s=g(S,"SPAN",{class:!0});var y=$(s);n=U(y,"Accounts"),y.forEach(c),l=z(S),p=g(S,"BUTTON",{class:!0});var R=$(p);D=g(R,"SPAN",{class:!0});var B=$(D);h=g(B,"I",{class:!0}),$(h).forEach(c),B.forEach(c),R.forEach(c),S.forEach(c),V=z(I);for(let x=0;x<v.length;x+=1)v[x].l(I);I.forEach(c),w=z(i),O(o.$$.fragment,i),this.h()},h(){m(s,"class","has-text-grey-lighter"),m(h,"class","fa-solid fa-plus"),m(D,"class","icon is-small"),m(p,"class","button is-small is-light"),m(t,"class","panel-block flex-container p-0"),m(e,"class","panel p-4 mb-0 accounts-container svelte-dhz2qe")},m(i,I){j(i,e,I),r(e,t),r(t,s),r(s,n),r(t,l),r(t,p),r(p,D),r(D,h),r(e,V);for(let S=0;S<v.length;S+=1)v[S]&&v[S].m(e,null);j(i,w,I),X(o,i,I),b=!0,P||(f=_e(p,"click",a[4]),P=!0)},p(i,[I]){if(I&14){d=i[2];let y;for(y=0;y<d.length;y+=1){const R=de(i,d,y);v[y]?(v[y].p(R,I),M(v[y],1)):(v[y]=he(R),v[y].c(),M(v[y],1),v[y].m(e,null))}for(ge(),y=d.length;y<v.length;y+=1)A(y);$e()}const S={};!u&&I&1&&(u=!0,S.modal=i[0],De(()=>u=!1)),o.$set(S)},i(i){if(!b){for(let I=0;I<d.length;I+=1)M(v[I]);M(o.$$.fragment,i),b=!0}},o(i){v=v.filter(Boolean);for(let I=0;I<v.length;I+=1)q(v[I]);q(o.$$.fragment,i),b=!1},d(i){i&&c(e),ve(v,i),i&&c(w),Y(o,i),P=!1,f()}}}function Le(a,e,t){let s,n;Q(a,ce,w=>t(1,s=w)),Q(a,Ie,w=>t(2,n=w));function l(w,o){je.show({x:w.pageX,y:w.pageY},[{title:"Set as favorite",icon:"fa-regular fa-star",action:()=>{Ne(ce,s.favoriteAccountId=o.id,s)}}])}let p=null;const D=()=>p.show(new Ce),h=(w,o)=>{l(o,w)};function V(w){p=w,t(0,p)}return[p,s,n,l,D,h,V]}class Qe extends ee{constructor(e){super(),te(this,e,Le,Je,se,{})}}function We(a){let e,t,s,n,l=a[0].number+"",p,D,h,V,w,o,u,b,P,f,d=a[0].percentage+"",v,A,k,N,i,I;return b=new re({props:{class:"title is-spaced",value:a[0].total}}),{c(){e=_("a"),t=_("div"),s=_("div"),n=_("span"),p=H(l),D=T(),h=_("span"),V=H("Investments"),w=T(),o=_("div"),u=_("span"),K(b.$$.fragment),P=T(),f=_("span"),v=H(d),A=H(" %"),k=_("i"),this.h()},l(S){e=g(S,"A",{class:!0,href:!0});var y=$(e);t=g(y,"DIV",{class:!0});var R=$(t);s=g(R,"DIV",{class:!0});var B=$(s);n=g(B,"SPAN",{class:!0});var x=$(n);p=U(x,l),x.forEach(c),D=z(B),h=g(B,"SPAN",{class:!0});var F=$(h);V=U(F,"Investments"),F.forEach(c),B.forEach(c),w=z(R),o=g(R,"DIV",{class:!0});var W=$(o);u=g(W,"SPAN",{});var E=$(u);O(b.$$.fragment,E),P=z(E),f=g(E,"SPAN",{class:!0});var C=$(f);v=U(C,d),A=U(C," %"),k=g(C,"I",{class:!0}),$(k).forEach(c),C.forEach(c),E.forEach(c),W.forEach(c),R.forEach(c),y.forEach(c),this.h()},h(){m(n,"class","is-size-1 number-of-investments title mb-0 svelte-14en6wt"),m(h,"class","is-size-6 has-text-grey-lighter number-of-investments svelte-14en6wt"),m(s,"class","column"),m(k,"class",N="fa-solid fa-arrow-trend-"+(a[0].percentage<0?"down":"up")),m(f,"class",i="percent subtitle is-4 "+(a[0].percentage<0?"has-text-danger":"has-text-success")+" svelte-14en6wt"),m(o,"class","column flex-container"),m(t,"class","columns is-mobile"),m(e,"class","box"),m(e,"href","/investments")},m(S,y){j(S,e,y),r(e,t),r(t,s),r(s,n),r(n,p),r(s,D),r(s,h),r(h,V),r(t,w),r(t,o),r(o,u),X(b,u,null),r(u,P),r(u,f),r(f,v),r(f,A),r(f,k),I=!0},p(S,[y]){(!I||y&1)&&l!==(l=S[0].number+"")&&Z(p,l);const R={};y&1&&(R.value=S[0].total),b.$set(R),(!I||y&1)&&d!==(d=S[0].percentage+"")&&Z(v,d),(!I||y&1&&N!==(N="fa-solid fa-arrow-trend-"+(S[0].percentage<0?"down":"up")))&&m(k,"class",N),(!I||y&1&&i!==(i="percent subtitle is-4 "+(S[0].percentage<0?"has-text-danger":"has-text-success")+" svelte-14en6wt"))&&m(f,"class",i)},i(S){I||(M(b.$$.fragment,S),I=!0)},o(S){q(b.$$.fragment,S),I=!1},d(S){S&&c(e),Y(b)}}}function Ze(a,e,t){let s,n;return Q(a,we,l=>t(1,n=l)),a.$$.update=()=>{a.$$.dirty&2&&t(0,s=Ue.getInvestmentsRecap(n))},[s,n]}class et extends ee{constructor(e){super(),te(this,e,Ze,We,se,{})}}function tt(a){let e,t,s,n,l=a[0].number+"",p,D,h,V,w,o,u,b,P,f,d,v;return b=new re({props:{class:"title mb-0 has-text-danger",value:a[0].perMonth}}),{c(){e=_("a"),t=_("div"),s=_("div"),n=_("span"),p=H(l),D=T(),h=_("span"),V=H("Subscriptions"),w=T(),o=_("div"),u=_("span"),K(b.$$.fragment),P=T(),f=_("span"),d=H("per month"),this.h()},l(A){e=g(A,"A",{class:!0,href:!0});var k=$(e);t=g(k,"DIV",{class:!0});var N=$(t);s=g(N,"DIV",{class:!0});var i=$(s);n=g(i,"SPAN",{class:!0});var I=$(n);p=U(I,l),I.forEach(c),D=z(i),h=g(i,"SPAN",{class:!0});var S=$(h);V=U(S,"Subscriptions"),S.forEach(c),i.forEach(c),w=z(N),o=g(N,"DIV",{class:!0});var y=$(o);u=g(y,"SPAN",{});var R=$(u);O(b.$$.fragment,R),P=z(R),f=g(R,"SPAN",{class:!0});var B=$(f);d=U(B,"per month"),B.forEach(c),R.forEach(c),y.forEach(c),N.forEach(c),k.forEach(c),this.h()},h(){m(n,"class","is-size-1 title-placement title mb-0 svelte-klj0o"),m(h,"class","is-size-6 has-text-grey-lighter title-placement svelte-klj0o"),m(s,"class","column has-text-right"),m(f,"class","title-placement is-size-6 has-text-grey-lighter svelte-klj0o"),m(o,"class","column flex-container"),m(t,"class","columns is-mobile"),m(e,"class","box"),m(e,"href","/subscriptions")},m(A,k){j(A,e,k),r(e,t),r(t,s),r(s,n),r(n,p),r(s,D),r(s,h),r(h,V),r(t,w),r(t,o),r(o,u),X(b,u,null),r(u,P),r(u,f),r(f,d),v=!0},p(A,[k]){(!v||k&1)&&l!==(l=A[0].number+"")&&Z(p,l);const N={};k&1&&(N.value=A[0].perMonth),b.$set(N)},i(A){v||(M(b.$$.fragment,A),v=!0)},o(A){q(b.$$.fragment,A),v=!1},d(A){A&&c(e),Y(b)}}}function st(a,e,t){let s,n;return Q(a,ye,l=>t(1,n=l)),a.$$.update=()=>{a.$$.dirty&2&&t(0,s=Fe.getSubscriptionsRecap(n))},[s,n]}class at extends ee{constructor(e){super(),te(this,e,st,tt,se,{})}}function nt(a){let e,t,s;return{c(){e=_("div"),t=_("span"),s=H("No favorite account"),this.h()},l(n){e=g(n,"DIV",{class:!0});var l=$(e);t=g(l,"SPAN",{class:!0});var p=$(t);s=U(p,"No favorite account"),p.forEach(c),l.forEach(c),this.h()},h(){m(t,"class","has-text-grey"),m(e,"class","flex-centered p-5")},m(n,l){j(n,e,l),r(e,t),r(t,s)},p:oe,i:oe,o:oe,d(n){n&&c(e)}}}function lt(a){let e,t;return e=new Te({props:{transactionsTotals:a[0].totals}}),{c(){K(e.$$.fragment)},l(s){O(e.$$.fragment,s)},m(s,n){X(e,s,n),t=!0},p(s,n){const l={};n&1&&(l.transactionsTotals=s[0].totals),e.$set(l)},i(s){t||(M(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function rt(a){let e,t,s,n,l,p,D,h,V,w,o,u,b,P,f,d,v,A,k,N,i,I,S,y,R,B;s=new Ye({}),l=new Qe({}),V=new Re({props:{transactionsRecap:a[0],class:"mb-2"}});const x=[lt,nt],F=[];function W(E,C){return E[0]?0:1}return f=W(a),d=F[f]=x[f](a),I=new et({}),R=new at({}),{c(){e=_("div"),t=_("div"),K(s.$$.fragment),n=T(),K(l.$$.fragment),p=T(),D=_("div"),h=_("div"),K(V.$$.fragment),w=T(),o=_("div"),u=_("span"),b=H("Account recap"),P=T(),d.c(),v=T(),A=_("hr"),k=T(),N=_("div"),i=_("div"),K(I.$$.fragment),S=T(),y=_("div"),K(R.$$.fragment),this.h()},l(E){e=g(E,"DIV",{class:!0});var C=$(e);t=g(C,"DIV",{class:!0});var G=$(t);O(s.$$.fragment,G),n=z(G),O(l.$$.fragment,G),G.forEach(c),p=z(C),D=g(C,"DIV",{class:!0});var J=$(D);h=g(J,"DIV",{class:!0});var ae=$(h);O(V.$$.fragment,ae),w=z(ae),o=g(ae,"DIV",{class:!0});var ne=$(o);u=g(ne,"SPAN",{class:!0});var ie=$(u);b=U(ie,"Account recap"),ie.forEach(c),P=z(ne),d.l(ne),ne.forEach(c),ae.forEach(c),J.forEach(c),C.forEach(c),v=z(E),A=g(E,"HR",{class:!0}),k=z(E),N=g(E,"DIV",{class:!0});var le=$(N);i=g(le,"DIV",{class:!0});var ue=$(i);O(I.$$.fragment,ue),ue.forEach(c),S=z(le),y=g(le,"DIV",{class:!0});var fe=$(y);O(R.$$.fragment,fe),fe.forEach(c),le.forEach(c),this.h()},h(){m(t,"class","column pb-0"),m(u,"class","has-text-grey-lighter box-title"),m(o,"class","box"),m(h,"class","flex-list"),m(D,"class","column pb-0"),m(e,"class","columns is-variable is-1"),m(A,"class","mx-5 my-4"),m(i,"class","column pb-0"),m(y,"class","column"),m(N,"class","columns is-variable is-1")},m(E,C){j(E,e,C),r(e,t),X(s,t,null),r(t,n),X(l,t,null),r(e,p),r(e,D),r(D,h),X(V,h,null),r(h,w),r(h,o),r(o,u),r(u,b),r(o,P),F[f].m(o,null),j(E,v,C),j(E,A,C),j(E,k,C),j(E,N,C),r(N,i),X(I,i,null),r(N,S),r(N,y),X(R,y,null),B=!0},p(E,[C]){const G={};C&1&&(G.transactionsRecap=E[0]),V.$set(G);let J=f;f=W(E),f===J?F[f].p(E,C):(ge(),q(F[J],1,1,()=>{F[J]=null}),$e(),d=F[f],d?d.p(E,C):(d=F[f]=x[f](E),d.c()),M(d,1),d.m(o,null))},i(E){B||(M(s.$$.fragment,E),M(l.$$.fragment,E),M(V.$$.fragment,E),M(d),M(I.$$.fragment,E),M(R.$$.fragment,E),B=!0)},o(E){q(s.$$.fragment,E),q(l.$$.fragment,E),q(V.$$.fragment,E),q(d),q(I.$$.fragment,E),q(R.$$.fragment,E),B=!1},d(E){E&&c(e),Y(s),Y(l),Y(V),F[f].d(),E&&c(v),E&&c(A),E&&c(k),E&&c(N),Y(I),Y(R)}}}function ot(a,e,t){let s;return Q(a,Ke,n=>t(0,s=n)),[s]}class bt extends ee{constructor(e){super(),te(this,e,ot,rt,se,{})}}export{bt as component};
