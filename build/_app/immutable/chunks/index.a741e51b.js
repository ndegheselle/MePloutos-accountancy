import{S as Ve,i as Be,s as Qe,k as w,q as R,a as B,l as E,m as A,r as q,h as g,c as Q,n as v,b as H,E as f,F as ae,v as Re,d as X,f as qe,g as W,G as Ue,D as $e,o as Ze,C as ie,K as Ge,y as ce,z as he,A as de,u as fe,B as me}from"./index.7e2123bf.js";import{b as We}from"./store.e78cf838.js";import{C as He}from"./CategoryIcon.fc906b4d.js";import{M as Ne}from"./Money.83140549.js";const K={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},Me={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};function Te(r,e){return typeof r=="number"?r+e:r}function ne(r){if(typeof r=="string"){const e=/^(\d+)\s*(.*)$/g.exec(r);return{value:e?+e[1]:0,unit:(e==null?void 0:e[2])||void 0}}return{value:Number(r)}}function Xe(r){return String.fromCharCode(97+r%26)}function le(r,e,t,s){const n=(s-90)*Math.PI/180;return{x:r+t*Math.cos(n),y:e+t*Math.sin(n)}}function k(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];for(let n=0;n<t.length;n++){const a=t[n];for(const i in a){const o=a[i];typeof o=="object"&&o!==null&&!(o instanceof Array)?r[i]=k(r[i],o):r[i]=o}}return r}const Ye=r=>r;function Oe(r,e){return Array.from({length:r},e?(t,s)=>e(s):()=>{})}const Je=(r,e)=>r+(e||0);function F(r,e){return r!==null&&typeof r=="object"&&Reflect.has(r,e)}function Ke(r){return r!==null&&isFinite(r)}function ke(r){return!r&&r!==0}function re(r){return Ke(r)?Number(r):void 0}function et(r){return Array.isArray(r)?r.every(Array.isArray):!1}function tt(r){return r==null||typeof r=="number"&&isNaN(r)}function st(r){return Array.isArray(r)&&r.every(e=>Array.isArray(e)||F(e,"data"))}function rt(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,n;const a={labels:(r.labels||[]).slice(),series:it(r.series,t,s)},i=a.labels.length;return et(a.series)?(n=Math.max(i,...a.series.map(o=>o.length)),a.series.forEach(o=>{o.push(...Oe(Math.max(0,n-o.length)))})):n=a.series.length,a.labels.push(...Oe(Math.max(0,n-i),()=>"")),e&&nt(a),a}function nt(r){var e;(e=r.labels)===null||e===void 0||e.reverse(),r.series.reverse();for(const t of r.series)F(t,"data")?t.data.reverse():Array.isArray(t)&&t.reverse()}function at(r,e){let t,s;if(typeof r!="object"){const n=re(r);e==="x"?t=n:s=n}else F(r,"x")&&(t=re(r.x)),F(r,"y")&&(s=re(r.y));if(!(t===void 0&&s===void 0))return{x:t,y:s}}function ze(r,e){if(!tt(r))return e?at(r,e):re(r)}function ge(r,e){return Array.isArray(r)?r.map(t=>F(t,"value")?ze(t.value,e):ze(t,e)):ge(r.data,e)}function it(r,e,t){if(st(r))return r.map(n=>ge(n,e));const s=ge(r,e);return t?s.map(n=>[n]):s}function lt(r){let e="";return r==null?r:(typeof r=="number"?e=""+r:typeof r=="object"?e=JSON.stringify({data:r}):e=String(r),Object.keys(Me).reduce((t,s)=>t.replaceAll(s,Me[s]),e))}class ot{call(e,t){return this.svgElements.forEach(s=>Reflect.apply(s[e],s,t)),this}attr(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("attr",t)}elem(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("elem",t)}root(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("root",t)}getNode(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("getNode",t)}foreignObject(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("foreignObject",t)}text(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("text",t)}empty(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("empty",t)}remove(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("remove",t)}addClass(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("addClass",t)}removeClass(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("removeClass",t)}removeAllClasses(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("removeAllClasses",t)}animate(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("animate",t)}constructor(e){this.svgElements=[];for(let t=0;t<e.length;t++)this.svgElements.push(new G(e[t]))}}const Fe={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};function Pe(r,e,t){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,n=arguments.length>4?arguments[4]:void 0;const{easing:a,...i}=t,o={};let l,u;a&&(l=Array.isArray(a)?a:Fe[a]),i.begin=Te(i.begin,"ms"),i.dur=Te(i.dur,"ms"),l&&(i.calcMode="spline",i.keySplines=l.join(" "),i.keyTimes="0;1"),s&&(i.fill="freeze",o[e]=i.from,r.attr(o),u=ne(i.begin||0).value,i.begin="indefinite");const c=r.elem("animate",{attributeName:e,...i});s&&setTimeout(()=>{try{c._node.beginElement()}catch{o[e]=i.to,r.attr(o),c.remove()}},u);const m=c.getNode();n&&m.addEventListener("beginEvent",()=>n.emit("animationBegin",{element:r,animate:m,params:t})),m.addEventListener("endEvent",()=>{n&&n.emit("animationEnd",{element:r,animate:m,params:t}),s&&(o[e]=i.to,r.attr(o),c.remove())})}class G{attr(e,t){return typeof e=="string"?t?this._node.getAttributeNS(t,e):this._node.getAttribute(e):(Object.keys(e).forEach(s=>{if(e[s]!==void 0)if(s.indexOf(":")!==-1){const n=s.split(":");this._node.setAttributeNS(K[n[0]],s,String(e[s]))}else this._node.setAttribute(s,String(e[s]))}),this)}elem(e,t,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return new G(e,t,s,this,n)}parent(){return this._node.parentNode instanceof SVGElement?new G(this._node.parentNode):null}root(){let e=this._node;for(;e.nodeName!=="svg"&&e.parentElement;)e=e.parentElement;return new G(e)}querySelector(e){const t=this._node.querySelector(e);return t?new G(t):null}querySelectorAll(e){const t=this._node.querySelectorAll(e);return new ot(t)}getNode(){return this._node}foreignObject(e,t,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a;if(typeof e=="string"){const o=document.createElement("div");o.innerHTML=e,a=o.firstChild}else a=e;a instanceof Element&&a.setAttribute("xmlns",K.xmlns);const i=this.elem("foreignObject",t,s,n);return i._node.appendChild(a),i}text(e){return this._node.appendChild(document.createTextNode(e)),this}empty(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this}remove(){var e;return(e=this._node.parentNode)===null||e===void 0||e.removeChild(this._node),this.parent()}replace(e){var t;return(t=this._node.parentNode)===null||t===void 0||t.replaceChild(e._node,this._node),e}append(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)&&this._node.firstChild?this._node.insertBefore(e._node,this._node.firstChild):this._node.appendChild(e._node),this}classes(){const e=this._node.getAttribute("class");return e?e.trim().split(/\s+/):[]}addClass(e){return this._node.setAttribute("class",this.classes().concat(e.trim().split(/\s+/)).filter(function(t,s,n){return n.indexOf(t)===s}).join(" ")),this}removeClass(e){const t=e.trim().split(/\s+/);return this._node.setAttribute("class",this.classes().filter(s=>t.indexOf(s)===-1).join(" ")),this}removeAllClasses(){return this._node.setAttribute("class",""),this}height(){return this._node.getBoundingClientRect().height}width(){return this._node.getBoundingClientRect().width}animate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,s=arguments.length>2?arguments[2]:void 0;return Object.keys(e).forEach(n=>{const a=e[n];Array.isArray(a)?a.forEach(i=>Pe(this,n,i,!1,s)):Pe(this,n,a,t,s)}),this}constructor(e,t,s,n,a=!1){e instanceof Element?this._node=e:(this._node=document.createElementNS(K.svg,e),e==="svg"&&this.attr({"xmlns:ct":K.ct})),t&&this.attr(t),s&&this.addClass(s),n&&(a&&n._node.firstChild?n._node.insertBefore(this._node,n._node.firstChild):n._node.appendChild(this._node))}}G.Easing=Fe;function ut(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"100%",t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"100%",s=arguments.length>3?arguments[3]:void 0;Array.from(r.querySelectorAll("svg")).filter(a=>a.getAttributeNS(K.xmlns,"ct")).forEach(a=>r.removeChild(a));const n=new G("svg").attr({width:e,height:t}).attr({style:"width: ".concat(e,"; height: ").concat(t,";")});return s&&n.addClass(s),r.appendChild(n.getNode()),n}function ct(r){return typeof r=="number"?{top:r,right:r,bottom:r,left:r}:r===void 0?{top:0,right:0,bottom:0,left:0}:{top:typeof r.top=="number"?r.top:0,right:typeof r.right=="number"?r.right:0,bottom:typeof r.bottom=="number"?r.bottom:0,left:typeof r.left=="number"?r.left:0}}function ht(r,e){var t,s,n,a;const i=!!(e.axisX||e.axisY),o=((t=e.axisY)===null||t===void 0?void 0:t.offset)||0,l=((s=e.axisX)===null||s===void 0?void 0:s.offset)||0,u=(n=e.axisY)===null||n===void 0?void 0:n.position,c=(a=e.axisX)===null||a===void 0?void 0:a.position;let m=r.width()||ne(e.width).value||0,y=r.height()||ne(e.height).value||0;const d=ct(e.chartPadding);m=Math.max(m,o+d.left+d.right),y=Math.max(y,l+d.top+d.bottom);const h={x1:0,x2:0,y1:0,y2:0,padding:d,width(){return this.x2-this.x1},height(){return this.y1-this.y2}};return i?(c==="start"?(h.y2=d.top+l,h.y1=Math.max(y-d.bottom,h.y2+1)):(h.y2=d.top,h.y1=Math.max(y-d.bottom-l,h.y2+1)),u==="start"?(h.x1=d.left+o,h.x2=Math.max(m-d.right,h.x1+1)):(h.x1=d.left,h.x2=Math.max(m-d.right-o,h.x1+1))):(h.x1=d.left,h.x2=Math.max(m-d.right,h.x1+1),h.y2=d.top,h.y1=Math.max(y-d.bottom,h.y2+1)),h}function Se(r,e,t){let s;const n=[];function a(o){const l=s;s=k({},r),e&&e.forEach(u=>{window.matchMedia(u[0]).matches&&(s=k(s,u[1]))}),t&&o&&t.emit("optionsChanged",{previousOptions:l,currentOptions:s})}function i(){n.forEach(o=>o.removeEventListener("change",a))}if(window.matchMedia)e&&e.forEach(o=>{const l=window.matchMedia(o[0]);l.addEventListener("change",a),n.push(l)});else throw new Error("window.matchMedia not found! Make sure you're using a polyfill.");return a(),{removeMediaQueryListeners:i,getCurrentOptions(){return s}}}const ve={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},dt={accuracy:3};function se(r,e,t,s,n,a){const i={command:n?r.toLowerCase():r.toUpperCase(),...e,...a?{data:a}:{}};t.splice(s,0,i)}function oe(r,e){r.forEach((t,s)=>{ve[t.command.toLowerCase()].forEach((n,a)=>{e(t,n,s,a,r)})})}class J{static join(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2?arguments[2]:void 0;const n=new J(t,s);for(let a=0;a<e.length;a++){const i=e[a];for(let o=0;o<i.pathElements.length;o++)n.pathElements.push(i.pathElements[o])}return n}position(e){return e!==void 0?(this.pos=Math.max(0,Math.min(this.pathElements.length,e)),this):this.pos}remove(e){return this.pathElements.splice(this.pos,e),this}move(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3?arguments[3]:void 0;return se("M",{x:+e,y:+t},this.pathElements,this.pos++,s,n),this}line(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3?arguments[3]:void 0;return se("L",{x:+e,y:+t},this.pathElements,this.pos++,s,n),this}curve(e,t,s,n,a,i){let o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,l=arguments.length>7?arguments[7]:void 0;return se("C",{x1:+e,y1:+t,x2:+s,y2:+n,x:+a,y:+i},this.pathElements,this.pos++,o,l),this}arc(e,t,s,n,a,i,o){let l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,u=arguments.length>8?arguments[8]:void 0;return se("A",{rx:e,ry:t,xAr:s,lAf:n,sf:a,x:i,y:o},this.pathElements,this.pos++,l,u),this}parse(e){const t=e.replace(/([A-Za-z])(-?[0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce((n,a)=>(a.match(/[A-Za-z]/)&&n.push([]),n[n.length-1].push(a),n),[]);t[t.length-1][0].toUpperCase()==="Z"&&t.pop();const s=t.map(n=>{const a=n.shift(),i=ve[a.toLowerCase()];return{command:a,...i.reduce((o,l,u)=>(o[l]=+n[u],o),{})}});return this.pathElements.splice(this.pos,0,...s),this.pos+=s.length,this}stringify(){const e=Math.pow(10,this.options.accuracy);return this.pathElements.reduce((t,s)=>{const n=ve[s.command.toLowerCase()].map(a=>{const i=s[a];return this.options.accuracy?Math.round(i*e)/e:i});return t+s.command+n.join(",")},"")+(this.close?"Z":"")}scale(e,t){return oe(this.pathElements,(s,n)=>{s[n]*=n[0]==="x"?e:t}),this}translate(e,t){return oe(this.pathElements,(s,n)=>{s[n]+=n[0]==="x"?e:t}),this}transform(e){return oe(this.pathElements,(t,s,n,a,i)=>{const o=e(t,s,n,a,i);(o||o===0)&&(t[s]=o)}),this}clone(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const t=new J(e||this.close);return t.pos=this.pos,t.pathElements=this.pathElements.slice().map(s=>({...s})),t.options={...this.options},t}splitByCommand(e){const t=[new J];return this.pathElements.forEach(s=>{s.command===e.toUpperCase()&&t[t.length-1].pathElements.length!==0&&t.push(new J),t[t.length-1].pathElements.push(s)}),t}constructor(e=!1,t){this.close=e,this.pathElements=[],this.pos=0,this.options={...dt,...t}}}class ft{on(e,t){const{allListeners:s,listeners:n}=this;e==="*"?s.add(t):(n.has(e)||n.set(e,new Set),n.get(e).add(t))}off(e,t){const{allListeners:s,listeners:n}=this;if(e==="*")t?s.delete(t):s.clear();else if(n.has(e)){const a=n.get(e);t?a.delete(t):a.clear(),a.size||n.delete(e)}}emit(e,t){const{allListeners:s,listeners:n}=this;n.has(e)&&n.get(e).forEach(a=>a(t)),s.forEach(a=>a(e,t))}constructor(){this.listeners=new Map,this.allListeners=new Set}}const ue=new WeakMap;class mt{update(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e&&(this.data=e||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),t&&(this.options=k({},s?this.options:this.defaultOptions,t),!this.initializeTimeoutId)){var n;(n=this.optionsProvider)===null||n===void 0||n.removeMediaQueryListeners(),this.optionsProvider=Se(this.options,this.responsiveOptions,this.eventEmitter)}return!this.initializeTimeoutId&&this.optionsProvider&&this.createChart(this.optionsProvider.getCurrentOptions()),this}detach(){if(this.initializeTimeoutId)window.clearTimeout(this.initializeTimeoutId);else{var e;window.removeEventListener("resize",this.resizeListener),(e=this.optionsProvider)===null||e===void 0||e.removeMediaQueryListeners()}return ue.delete(this.container),this}on(e,t){return this.eventEmitter.on(e,t),this}off(e,t){return this.eventEmitter.off(e,t),this}initialize(){window.addEventListener("resize",this.resizeListener),this.optionsProvider=Se(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.on("optionsChanged",()=>this.update()),this.options.plugins&&this.options.plugins.forEach(e=>{Array.isArray(e)?e[0](this,e[1]):e(this)}),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=null}constructor(e,t,s,n,a){this.data=t,this.defaultOptions=s,this.options=n,this.responsiveOptions=a,this.eventEmitter=new ft,this.resizeListener=()=>this.update(),this.initializeTimeoutId=setTimeout(()=>this.initialize(),0);const i=typeof e=="string"?document.querySelector(e):e;if(!i)throw new Error("Target element is not found");this.container=i;const o=ue.get(i);o&&o.detach(),ue.set(i,this)}}const Le={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:Ye,labelDirection:"neutral",ignoreEmptyValues:!1};function gt(r,e,t){const s=e.x>r.x;return s&&t==="explode"||!s&&t==="implode"?"start":s&&t==="implode"||!s&&t==="explode"?"end":"middle"}class vt extends mt{createChart(e){const{data:t}=this,s=rt(t),n=[];let a,i,o=e.startAngle;const l=ut(this.container,e.width,e.height,e.donut?e.classNames.chartDonut:e.classNames.chartPie);this.svg=l;const u=ht(l,e);let c=Math.min(u.width()/2,u.height()/2);const m=e.total||s.series.reduce(Je,0),y=ne(e.donutWidth);y.unit==="%"&&(y.value*=c/100),c-=e.donut?y.value/2:0,e.labelPosition==="outside"||e.donut?i=c:e.labelPosition==="center"?i=0:i=c/2,e.labelOffset&&(i+=e.labelOffset);const d={x:u.x1+u.width()/2,y:u.y2+u.height()/2},h=t.series.filter(p=>F(p,"value")?p.value!==0:p!==0).length===1;t.series.forEach((p,b)=>n[b]=l.elem("g")),e.showLabel&&(a=l.elem("g")),t.series.forEach((p,b)=>{var D,I;if(s.series[b]===0&&e.ignoreEmptyValues)return;const P=F(p,"name")&&p.name,x=F(p,"className")&&p.className,_=F(p,"meta")?p.meta:void 0;P&&n[b].attr({"ct:series-name":P}),n[b].addClass([(D=e.classNames)===null||D===void 0?void 0:D.series,x||"".concat((I=e.classNames)===null||I===void 0?void 0:I.series,"-").concat(Xe(b))].join(" "));let C=m>0?o+s.series[b]/m*360:0;const O=Math.max(0,o-(b===0||h?0:.2));C-O>=359.99&&(C=O+359.99);const S=le(d.x,d.y,c,O),j=le(d.x,d.y,c,C),M=new J(!e.donut).move(j.x,j.y).arc(c,c,0,+(C-o>180),0,S.x,S.y);e.donut||M.line(d.x,d.y);const T=n[b].elem("path",{d:M.stringify()},e.donut?e.classNames.sliceDonut:e.classNames.slicePie);if(T.attr({"ct:value":s.series[b],"ct:meta":lt(_)}),e.donut&&T.attr({style:"stroke-width: "+y.value+"px"}),this.eventEmitter.emit("draw",{type:"slice",value:s.series[b],totalDataSum:m,index:b,meta:_,series:p,group:n[b],element:T,path:M.clone(),center:d,radius:c,startAngle:o,endAngle:C,chartRect:u}),e.showLabel){let V;t.series.length===1?V={x:d.x,y:d.y}:V=le(d.x,d.y,i,o+(C-o)/2);let L;s.labels&&!ke(s.labels[b])?L=s.labels[b]:L=s.series[b];const U=e.labelInterpolationFnc(L,b);if(U||U===0){const ee=a.elem("text",{dx:V.x,dy:V.y,"text-anchor":gt(d,V,e.labelDirection)},e.classNames.label).text(String(U));this.eventEmitter.emit("draw",{type:"label",index:b,group:a,element:ee,text:""+U,chartRect:u,series:p,meta:_,...V})}}o=C}),this.eventEmitter.emit("created",{chartRect:u,svg:l,options:e})}constructor(e,t,s,n){super(e,t,Le,k({},Le,s),n),this.data=t}}function De(r,e,t){const s=r.slice();return s[11]=e[t],s}function pt(r){let e,t,s;return{c(){e=w("div"),t=w("span"),s=R("No values"),this.h()},l(n){e=E(n,"DIV",{class:!0});var a=A(e);t=E(a,"SPAN",{class:!0});var i=A(t);s=q(i,"No values"),i.forEach(g),a.forEach(g),this.h()},h(){v(t,"class","has-text-grey svelte-1bp1ziv"),v(e,"class","flex-centered p-5")},m(n,a){H(n,e,a),f(e,t),f(t,s)},p:ie,i:ie,o:ie,d(n){n&&g(e)}}}function yt(r){let e,t,s,n,a=r[3],i=[];for(let l=0;l<a.length;l+=1)i[l]=je(De(r,a,l));const o=l=>X(i[l],1,1,()=>{i[l]=null});return{c(){e=w("div"),t=B(),s=w("div");for(let l=0;l<i.length;l+=1)i[l].c();this.h()},l(l){e=E(l,"DIV",{class:!0}),A(e).forEach(g),t=Q(l),s=E(l,"DIV",{class:!0});var u=A(s);for(let c=0;c<i.length;c+=1)i[c].l(u);u.forEach(g),this.h()},h(){v(e,"class","ct-chart"),v(s,"class","columns is-gapless is-multiline categories-legend svelte-1bp1ziv")},m(l,u){H(l,e,u),H(l,t,u),H(l,s,u);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(s,null);n=!0},p(l,u){if(u&24){a=l[3];let c;for(c=0;c<a.length;c+=1){const m=De(l,a,c);i[c]?(i[c].p(m,u),W(i[c],1)):(i[c]=je(m),i[c].c(),W(i[c],1),i[c].m(s,null))}for(Re(),c=a.length;c<i.length;c+=1)o(c);qe()}},i(l){if(!n){for(let u=0;u<a.length;u+=1)W(i[u]);n=!0}},o(l){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)X(i[u]);n=!1},d(l){l&&g(e),l&&g(t),l&&g(s),Ge(i,l)}}}function je(r){let e,t,s,n,a=r[4].get(r[11].id).name+"",i,o,l;return t=new He({props:{categoryId:r[11].id,class:"small-icon"}}),{c(){e=w("div"),ce(t.$$.fragment),s=B(),n=w("span"),i=R(a),o=B(),this.h()},l(u){e=E(u,"DIV",{class:!0});var c=A(e);he(t.$$.fragment,c),s=Q(c),n=E(c,"SPAN",{class:!0});var m=A(n);i=q(m,a),m.forEach(g),o=Q(c),c.forEach(g),this.h()},h(){v(n,"class","ml-2 svelte-1bp1ziv"),v(e,"class","column is-one-third is-flex is-align-items-center")},m(u,c){H(u,e,c),de(t,e,null),f(e,s),f(e,n),f(n,i),f(e,o),l=!0},p(u,c){const m={};c&8&&(m.categoryId=u[11].id),t.$set(m),(!l||c&24)&&a!==(a=u[4].get(u[11].id).name+"")&&fe(i,a)},i(u){l||(W(t.$$.fragment,u),l=!0)},o(u){X(t.$$.fragment,u),l=!1},d(u){u&&g(e),me(t)}}}function bt(r){let e,t,s,n,a,i,o,l,u,c,m,y,d,h,p,b,D,I,P,x,_,C,O,S,j,M,T,V,L,U,ee;const pe=[yt,pt],$=[];function ye(N,z){return N[1]?0:1}return M=ye(r),T=$[M]=pe[M](r),{c(){e=w("div"),t=w("div"),s=w("span"),n=R("Categories"),a=B(),i=w("div"),o=w("div"),l=w("button"),u=w("span"),c=w("i"),m=B(),y=w("div"),d=w("div"),h=w("a"),p=R("All"),D=B(),I=w("a"),P=R("Only negatives"),_=B(),C=w("a"),O=R("Only positives"),j=B(),T.c(),this.h()},l(N){e=E(N,"DIV",{class:!0});var z=A(e);t=E(z,"DIV",{class:!0});var Z=A(t);s=E(Z,"SPAN",{class:!0});var be=A(s);n=q(be,"Categories"),be.forEach(g),a=Q(Z),i=E(Z,"DIV",{class:!0});var te=A(i);o=E(te,"DIV",{class:!0});var we=A(o);l=E(we,"BUTTON",{class:!0,"aria-haspopup":!0});var Ee=A(l);u=E(Ee,"SPAN",{class:!0});var Ae=A(u);c=E(Ae,"I",{class:!0}),A(c).forEach(g),Ae.forEach(g),Ee.forEach(g),we.forEach(g),m=Q(te),y=E(te,"DIV",{class:!0,role:!0});var xe=A(y);d=E(xe,"DIV",{class:!0});var Y=A(d);h=E(Y,"A",{class:!0});var Ce=A(h);p=q(Ce,"All"),Ce.forEach(g),D=Q(Y),I=E(Y,"A",{class:!0});var _e=A(I);P=q(_e,"Only negatives"),_e.forEach(g),_=Q(Y),C=E(Y,"A",{class:!0});var Ie=A(C);O=q(Ie,"Only positives"),Ie.forEach(g),Y.forEach(g),xe.forEach(g),te.forEach(g),Z.forEach(g),j=Q(z),T.l(z),z.forEach(g),this.h()},h(){v(s,"class","has-text-grey-lighter box-title svelte-1bp1ziv"),v(c,"class","fa-solid fa-filter"),v(u,"class","icon is-small svelte-1bp1ziv"),v(l,"class","button is-small is-light"),v(l,"aria-haspopup","true"),v(o,"class","dropdown-trigger"),v(h,"class",b="dropdown-item "+(r[2]=="all"?"is-active":"")),v(I,"class",x="dropdown-item "+(r[2]=="onlyNegatives"?"is-active":"")),v(C,"class",S="dropdown-item "+(r[2]=="onlyPositives"?"is-active":"")),v(d,"class","dropdown-content"),v(y,"class","dropdown-menu"),v(y,"role","menu"),v(i,"class","dropdown is-right"),v(t,"class","flex-container"),v(e,"class",V="box "+r[0]+" svelte-1bp1ziv")},m(N,z){H(N,e,z),f(e,t),f(t,s),f(s,n),f(t,a),f(t,i),f(i,o),f(o,l),f(l,u),f(u,c),f(i,m),f(i,y),f(y,d),f(d,h),f(h,p),f(d,D),f(d,I),f(I,P),f(d,_),f(d,C),f(C,O),f(e,j),$[M].m(e,null),L=!0,U||(ee=[ae(h,"click",r[7]),ae(I,"click",r[8]),ae(C,"click",r[9])],U=!0)},p(N,[z]){(!L||z&4&&b!==(b="dropdown-item "+(N[2]=="all"?"is-active":"")))&&v(h,"class",b),(!L||z&4&&x!==(x="dropdown-item "+(N[2]=="onlyNegatives"?"is-active":"")))&&v(I,"class",x),(!L||z&4&&S!==(S="dropdown-item "+(N[2]=="onlyPositives"?"is-active":"")))&&v(C,"class",S);let Z=M;M=ye(N),M===Z?$[M].p(N,z):(Re(),X($[Z],1,1,()=>{$[Z]=null}),qe(),T=$[M],T?T.p(N,z):(T=$[M]=pe[M](N),T.c()),W(T,1),T.m(e,null)),(!L||z&1&&V!==(V="box "+N[0]+" svelte-1bp1ziv"))&&v(e,"class",V)},i(N){L||(W(T),L=!0)},o(N){X(T),L=!1},d(N){N&&g(e),$[M].d(),U=!1,Ue(ee)}}}function wt(r,e,t){return{series:e.map(s=>({value:Math.abs(s.value)*100/Math.abs(t)||1,className:`category-${s.id}`})),labels:e.map(s=>s.value.toLocaleString(void 0,{currency:"EUR",style:"currency"}))}}function Et(r,e,t){let s;$e(r,We,h=>t(4,s=h));function n(h,p){if(p.categoriesTotal)switch(h){case"all":t(5,o=p.totals.total),t(3,i=p.categoriesTotal);break;case"onlyNegatives":t(5,o=p.totals.negativeTotal),t(3,i=p.categoriesNegative);break;case"onlyPositives":t(5,o=p.totals.positiveTotal),t(3,i=p.categoriesPositive);break}}Ze(async()=>{t(6,l=new vt(".ct-chart",{series:[],labels:[]},{donut:!0,donutWidth:40,donutSolid:!0,startAngle:270,showLabel:!0}))});let a="onlyNegatives",i=[],o=0,l=null,{class:u=""}=e,{transactionsRecap:c={}}=e;const m=()=>t(2,a="all"),y=()=>t(2,a="onlyNegatives"),d=()=>t(2,a="onlyPositives");return r.$$set=h=>{"class"in h&&t(0,u=h.class),"transactionsRecap"in h&&t(1,c=h.transactionsRecap)},r.$$.update=()=>{r.$$.dirty&6&&n(a,c),r.$$.dirty&120&&l&&i!=null&&i.length&&l.update(wt(s,i,o))},[u,c,a,i,s,o,l,m,y,d]}class Ot extends Ve{constructor(e){super(),Be(this,e,Et,bt,Qe,{class:0,transactionsRecap:1})}}function At(r){let e,t,s,n,a,i=(Math.round(r[0].positiveTotal*100/r[0].total)||0)+"",o,l,u,c,m,y,d,h,p=(Math.round(r[0].negativeTotal*100/r[0].total)||0)+"",b,D,I,P;return s=new Ne({props:{class:"title is-spaced",value:r[0].positiveTotal}}),y=new Ne({props:{class:"title is-spaced",value:r[0].negativeTotal}}),{c(){e=w("div"),t=w("div"),ce(s.$$.fragment),n=B(),a=w("span"),o=R(i),l=R(" %"),u=w("i"),c=B(),m=w("div"),ce(y.$$.fragment),d=B(),h=w("span"),b=R(p),D=R(" %"),I=w("i"),this.h()},l(x){e=E(x,"DIV",{class:!0});var _=A(e);t=E(_,"DIV",{class:!0});var C=A(t);he(s.$$.fragment,C),n=Q(C),a=E(C,"SPAN",{class:!0});var O=A(a);o=q(O,i),l=q(O," %"),u=E(O,"I",{class:!0}),A(u).forEach(g),O.forEach(g),C.forEach(g),c=Q(_),m=E(_,"DIV",{class:!0});var S=A(m);he(y.$$.fragment,S),d=Q(S),h=E(S,"SPAN",{class:!0});var j=A(h);b=q(j,p),D=q(j," %"),I=E(j,"I",{class:!0}),A(I).forEach(g),j.forEach(g),S.forEach(g),_.forEach(g),this.h()},h(){v(u,"class","fa-solid fa-arrow-trend-up"),v(a,"class","percent has-text-success subtitle is-4 svelte-8wyi98"),v(t,"class","column"),v(I,"class","fa-solid fa-arrow-trend-down"),v(h,"class","percent has-text-danger subtitle is-4 svelte-8wyi98"),v(m,"class","column summary"),v(e,"class","columns is-mobile has-text-centered")},m(x,_){H(x,e,_),f(e,t),de(s,t,null),f(t,n),f(t,a),f(a,o),f(a,l),f(a,u),f(e,c),f(e,m),de(y,m,null),f(m,d),f(m,h),f(h,b),f(h,D),f(h,I),P=!0},p(x,[_]){const C={};_&1&&(C.value=x[0].positiveTotal),s.$set(C),(!P||_&1)&&i!==(i=(Math.round(x[0].positiveTotal*100/x[0].total)||0)+"")&&fe(o,i);const O={};_&1&&(O.value=x[0].negativeTotal),y.$set(O),(!P||_&1)&&p!==(p=(Math.round(x[0].negativeTotal*100/x[0].total)||0)+"")&&fe(b,p)},i(x){P||(W(s.$$.fragment,x),W(y.$$.fragment,x),P=!0)},o(x){X(s.$$.fragment,x),X(y.$$.fragment,x),P=!1},d(x){x&&g(e),me(s),me(y)}}}function xt(r,e,t){let{transactionsTotals:s=null}=e;return r.$$set=n=>{"transactionsTotals"in n&&t(0,s=n.transactionsTotals)},[s]}class zt extends Ve{constructor(e){super(),Be(this,e,xt,At,Qe,{transactionsTotals:0})}}function Ct(r){let e=[];if(!r)return e;r=r.sort((s,n)=>n.date-s.date||n.orderNumber-s.orderNumber);let t=new Date(0);for(let s of r)s.date.getTime()!=t.getTime()&&(e.push({date:s.date,transactions:[]}),t=s.date),e[e.length-1].transactions.push(s);return e}function _t(r){let e=new Map,t=new Map,s=new Map,n={positiveTotal:0,negativeTotal:0,total:0};for(let l of r||[])e.has(l.categoryId)||e.set(l.categoryId,0),e.set(l.categoryId,e.get(l.categoryId)+Math.abs(l.value)),l.value>0?(t.has(l.categoryId)||t.set(l.categoryId,0),t.set(l.categoryId,t.get(l.categoryId)+l.value),n.positiveTotal+=l.value):(s.has(l.categoryId)||s.set(l.categoryId,0),s.set(l.categoryId,s.get(l.categoryId)+l.value),n.negativeTotal+=l.value);let a=Array.from(e,function(l){return{id:l[0],value:l[1]}}).sort((l,u)=>l.value>u.value?1:l.value<u.value?-1:0),i=Array.from(t,function(l){return{id:l[0],value:l[1]}}).sort((l,u)=>l.value>u.value?1:l.value<u.value?-1:0),o=Array.from(s,function(l){return{id:l[0],value:l[1]}}).sort((l,u)=>l.value>u.value?1:l.value<u.value?-1:0);return n.total=Math.abs(n.positiveTotal)+Math.abs(n.negativeTotal),{categoriesTotal:a,categoriesPositive:i,categoriesNegative:o,totals:n}}const Pt={groupTransactionsByDate:Ct,getTransactionsRecap:_t};export{zt as A,Ot as C,Pt as T};
